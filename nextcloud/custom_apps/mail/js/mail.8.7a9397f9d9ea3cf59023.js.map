{"version":3,"sources":["webpack:///./src/components/AppDetailsToggle.vue?7542","webpack:///./src/components/AppDetailsToggle.vue?0d54","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/Envelope.vue?4247","webpack:///./src/components/Envelope.vue?c0b7","webpack:///./img/reply.svg","webpack:///./src/components/EnvelopeList.vue?8d35","webpack:///./src/components/EnvelopeList.vue?48b3","webpack:///./src/components/itinerary/EventReservation.vue?2e5b","webpack:///./src/components/itinerary/EventReservation.vue?91a6","webpack:///./src/components/itinerary/FlightReservation.vue?9e21","webpack:///./src/components/itinerary/FlightReservation.vue?b857","webpack:///./src/components/itinerary/TrainReservation.vue?9c5e","webpack:///./src/components/itinerary/TrainReservation.vue?75d3","webpack:///./src/components/MessageHTMLBody.vue?20a6","webpack:///./src/components/MessageHTMLBody.vue?15a8","webpack:///./src/components/MessagePlainTextBody.vue?94b2","webpack:///./src/components/MessagePlainTextBody.vue?fed8","webpack:///./src/components/MessageAttachment.vue?4da2","webpack:///./src/components/MessageAttachment.vue?bf0b","webpack:///./src/components/MessageAttachments.vue?387a","webpack:///./src/components/MessageAttachments.vue?dd87","webpack:///./src/components/Message.vue?4d17","webpack:///./src/components/Message.vue?acda","webpack:///./src/components/ComposerAttachments.vue?ed78","webpack:///./src/components/ComposerAttachments.vue?ab22","webpack:///./src/components/Composer.vue?178d","webpack:///./src/components/Composer.vue?7df8","webpack:///./src/components/Composer.vue?821d","webpack:///./src/components/Composer.vue?a204","webpack:///./src/components/NoMessageSelected.vue?5ddf","webpack:///./src/components/NoMessageSelected.vue?39b1","webpack:///./src/views/Home.vue?26f5","webpack:///./src/views/Home.vue?182b","webpack:///./src/views/Home.vue?e656","webpack:///./src/components/AppDetailsToggle.vue?9998","webpack:///src/components/AppDetailsToggle.vue","webpack:///./src/components/AppDetailsToggle.vue","webpack:///./src/components/AppDetailsToggle.vue?f867","webpack:///./src/components/EmptyFolder.vue?2112","webpack:///src/components/EmptyFolder.vue","webpack:///./src/components/EmptyFolder.vue","webpack:///./src/components/EmptyFolder.vue?05bc","webpack:///./src/components/Moment.vue?eaed","webpack:///src/components/Moment.vue","webpack:///./src/components/Moment.vue","webpack:///./src/components/Moment.vue?c1e1","webpack:///./src/service/AvatarService.js","webpack:///./src/components/Avatar.vue?0735","webpack:///src/components/Avatar.vue","webpack:///./src/components/Avatar.vue","webpack:///./src/components/Avatar.vue?ac00","webpack:///./src/components/Envelope.vue?f968","webpack:///src/components/Envelope.vue","webpack:///./src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?542a","webpack:///src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?f5c3","webpack:///./src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?6285","webpack:///./src/components/Loading.vue?8bea","webpack:///src/components/Loading.vue","webpack:///./src/components/Loading.vue","webpack:///./src/components/Loading.vue?646d","webpack:///./src/components/Address.vue?5fef","webpack:///src/components/Address.vue","webpack:///./src/components/AddressList.vue?41bb","webpack:///src/components/AddressList.vue","webpack:///./src/components/Address.vue","webpack:///./src/components/Address.vue?30b3","webpack:///./src/components/AddressList.vue","webpack:///./src/components/AddressList.vue?97a9","webpack:///./src/ReplyBuilder.js","webpack:///./src/util/CrashReport.js","webpack:///./src/components/Error.vue?1fd4","webpack:///src/components/Error.vue","webpack:///./src/components/Error.vue","webpack:///./src/components/Error.vue?5480","webpack:///./src/util/ErrorMessageFactory.js","webpack:///./src/service/DAVService.js","webpack:///./src/components/itinerary/CalendarImport.vue?ef70","webpack:///src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue?1447","webpack:///./src/components/itinerary/EventReservation.vue?f93a","webpack:///src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue?6484","webpack:///./src/components/itinerary/FlightReservation.vue?a2ae","webpack:///src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?8f00","webpack:///./src/components/itinerary/TrainReservation.vue?a40c","webpack:///src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?dbe5","webpack:///src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?6d2b","webpack:///./src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?ae4e","webpack:///src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?aa4c","webpack:///./src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?48fb","webpack:///./src/components/MessagePlainTextBody.vue?6434","webpack:///src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?1379","webpack:///./src/service/AttachmentService.js","webpack:///./src/components/MessageAttachment.vue?426a","webpack:///src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachments.vue?43cf","webpack:///src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?c349","webpack:///./src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachments.vue?0902","webpack:///./src/components/Message.vue?7d74","webpack:///src/components/Message.vue","webpack:///./src/components/Message.vue","webpack:///./src/components/Message.vue?62b1","webpack:///./src/components/ComposerAttachments.vue?8b74","webpack:///src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?9373","webpack:///src/components/Composer.vue","webpack:///./src/service/AutocompleteService.js","webpack:///./src/components/Composer.vue?b085","webpack:///./src/components/Composer.vue","webpack:///./src/components/Composer.vue?ca11","webpack:///./src/components/NewMessageDetail.vue?15b4","webpack:///src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue?2688","webpack:///./src/components/NoMessageSelected.vue?7c7e","webpack:///src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?1782","webpack:///./src/components/FolderContent.vue?c9af","webpack:///src/components/FolderContent.vue","webpack:///./src/components/FolderContent.vue","webpack:///./src/components/FolderContent.vue?bd27","webpack:///./src/views/Home.vue?8c94","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue","webpack:///./src/components/NavigationAccountExpandCollapse.vue?a5db","webpack:///./src/components/AppSettingsMenu.vue?9c32","webpack:///./src/components/TextEditor.vue?3f13","webpack:///./src/components/Navigation.vue?8b3c","webpack:///./src/components/NavigationAccount.vue?6cd9","webpack:///src/components/NavigationAccount.vue","webpack:///./src/components/NavigationAccount.vue","webpack:///./src/components/NavigationAccount.vue?eb43","webpack:///./src/components/NavigationAccountExpandCollapse.vue?f1fb","webpack:///src/components/NavigationAccountExpandCollapse.vue","webpack:///./src/components/NavigationAccountExpandCollapse.vue","webpack:///./src/components/NavigationAccountExpandCollapse.vue?27d4","webpack:///./src/l10n/MailboxTranslator.js","webpack:///src/components/NavigationFolder.vue","webpack:///./src/components/NavigationFolder.vue?7c72","webpack:///./src/components/NavigationFolder.vue","webpack:///./src/components/NavigationFolder.vue?eaa8","webpack:///./src/components/AppSettingsMenu.vue?2b54","webpack:///src/components/AppSettingsMenu.vue","webpack:///./src/components/AppSettingsMenu.vue","webpack:///./src/components/AppSettingsMenu.vue?d7d4","webpack:///src/components/Navigation.vue","webpack:///./src/components/Navigation.vue?b567","webpack:///./src/components/Navigation.vue","webpack:///./src/util/AccountColor.js","webpack:///./src/components/NavigationAccountExpandCollapse.vue?0811","webpack:///./src/components/NavigationAccountExpandCollapse.vue?f2fc","webpack:///./src/components/AppSettingsMenu.vue?ab9d","webpack:///./src/components/AppSettingsMenu.vue?ab30","webpack:///./node_modules/@ckeditor/ckeditor5-build-balloon/build/translations lazy-once ^\\.\\/.*$ prefetchOrder: 0 preloadOrder: 0 namespace object","webpack:///./src/components/TextEditor.vue?b6db","webpack:///./src/components/TextEditor.vue?6ed0","webpack:///./src/util/HtmlHelper.js","webpack:///./src/components/AppDetailsToggle.vue?ba4f","webpack:///./src/components/Envelope.vue?f3b6","webpack:///./src/components/EnvelopeList.vue?775a","webpack:///./src/components/itinerary/EventReservation.vue?34c6","webpack:///./src/components/itinerary/FlightReservation.vue?87f0","webpack:///./src/components/itinerary/TrainReservation.vue?c567","webpack:///./src/components/MessageHTMLBody.vue?4907","webpack:///./src/components/MessagePlainTextBody.vue?6fe6","webpack:///./src/components/MessageAttachment.vue?3844","webpack:///./src/components/MessageAttachments.vue?6925","webpack:///./src/components/Message.vue?b45c","webpack:///./src/components/ComposerAttachments.vue?6441","webpack:///./src/components/Composer.vue?bc1a","webpack:///./src/components/Composer.vue?6c15","webpack:///./src/components/NoMessageSelected.vue?b18a","webpack:///./src/views/Home.vue?4214","webpack:///./src/components/TextEditor.vue?9336","webpack:///./src/components/TextEditor.vue?6a9a","webpack:///src/components/TextEditor.vue","webpack:///./src/components/TextEditor.vue"],"names":["exports","___CSS_LOADER_API_IMPORT___","push","module","i","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","___CSS_LOADER_GET_URL_IMPORT___","___CSS_LOADER_URL_IMPORT_0___","___CSS_LOADER_URL_REPLACEMENT_0___","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$emit","_e","_v","_s","t","timestamp","title","formatted","fetchAvatarUrlMemoized","memoize","email","Promise","undefined","url","generateUrl","Axios","get","then","resp","data","avatar","isExternal","catch","err","response","status","reject","loading","hasAvatar","displayName","avatarUrl","class","unseen","flags","draft","link","folder","style","accountColor","flagged","preventDefault","onToggleFlagged","addresses","avatarEmail","subject","dateInt","onToggleSeen","onDelete","show","directives","name","rawName","value","expression","modifiers","nativeOn","handleShortcut","key","refreshing","envelopes","length","_l","env","uid","onEnvelopeDeleted","loadingMore","hint","label","newMessageRoute","entry","idx","entries","RecipientType","seal","None","To","Cc","buildRecipients","envelope","ownAddress","recipientType","isOwnAddress","a","isNotOwnAddress","negate","replyingAddress","to","find","cc","filter","concat","from","replyPrepends","buildReplySubject","original","some","prepend","toLowerCase","startsWith","forwardPrepends","flattenTrace","trace","reduce","acc","text","function","file","line","getReportUrl","error","console","message","endsWith","template","IssueTemplateBuilder","addEmptyStepsToReproduce","addExpectedActualBehaviour","addLogs","type","stack","flattenError","render","encodeURIComponent","debug","reportUrl","smileys","getRandomSmiley","Math","floor","random","getRandomMessageErrorMessage","texts","client","Client","baseUrl","generateRemoteUrl","xmlNamespaces","props","getUserCalendars","getCurrentUser","propFind","requesttoken","getRequestToken","calendars","body","forEach","cal","propStat","parseInt","split","getResponseCodeFromHTTPResponse","properties","canWrite","acl","k","href","getElementsByTagNameNS","textContent","getACLFromResponse","displayname","color","order","components","vevent","writable","attributes","getNamedItem","hasOwnProperty","call","getCalendarData","getRandomString","str","toString","substring","importCalendarEvent","Logger","promises","timezones","allObjects","jCal","ical","parse","Component","getAllSubcomponents","vtimezone","componentNames","componentName","vobjects","vobject","getFirstPropertyValue","objectsId","objects","component","root","updatePropertyWithValue","OC","theme","objectId","addSubcomponent","bind","splitCalendar","componentId","info","put","headers","all","calendar","onImport","eventName","location","date","time","handleImport","reservationFor","departureAirport","iataCode","departureDate","departureTime","flightNumber","reservation","arrivalAirport","arrivalDate","arrivalTime","departureStation","trainNumber","arrivalStation","messageId","onShowBlockedContent","hidden","ref","onMessageFrameLoad","domProps","htmlBody","htmlSignature","saveAttachmentToFiles","accountId","folderId","attachmentId","directory","post","targetPath","res","download","mimeUrl","humanReadable","size","loadingCalendars","stopPropagation","loadCalendars","savingToCloud","saveToCloud","open","showCalendarPopover","calendarMenuEntries","attachment","fileName","downloadUrl","isImage","isCalendarEvent","mime","saveAll","hasMultipleRecipients","replyAll","replyMessage","forwardMessage","itineraries","htmlUrl","signature","attachments","errorMessage","progress","FormData","opts","onUploadProgress","prog","loaded","total","append","uploading","percent","uploadProgress","staticStyle","onLocalAttachmentSelected","term","state","STATES","EDITING","aliases","formatAliases","onInputChanged","model","callback","$$v","selectedAlias","selectableRecipients","onNewToAddr","onAutocomplete","selectTo","showCC","onNewCcAddr","selectCc","slot","onNewBccAddr","selectBcc","target","composing","subjectVal","isReply","bodyVal","bus","onAttachmentsUploading","savingDraft","onAddLocalAttachment","onAddCloudAttachment","editorPlainText","canSend","submitButtonTitle","onSend","UPLOADING","SENDING","ERROR","errorText","reset","dateString","moment","unix","format","replace","composerData","bcc","saveDraft","sendMessage","isPlainText","hideMessage","account","searchQuery","showMessage","hasMessages","isMobile","onNewMessage","activeAccount","activeFolder","content","locals","add","default","iconError","menuOpen","emailAddress","settingsRoute","scopedSlots","_u","fn","createFolder","isFirst","changeAccountOrderUp","isLast","changeAccountOrderDown","provisioned","deleteAccount","proxy","bulletColor","toggleCollapse","translate","specialUse","includes","isUnified","translateSpecial","genId","icon","onMenuToggle","statsText","loadingMarkAsRead","markAsRead","unread","subFolder","useExternalAvatars","onToggleExternalAvatars","registerProtocolHandler","group","item","collapsed","SHOW_COLLAPSED","indexOf","specialRole","folders","calculateAccountColor","hashed","md5","hsl","conv","hex","fixedHsl","round","webpackAsyncContext","webpackAsyncContextResolve","htmlToText","html","withBlockBreaks","fromString","noLinkBrackets","ignoreHref","ignoreImage","wordwrap","blockquote","element","options","children","textToSimpleHtml","config","editor","onInput","onEditorReady"],"mappings":"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ACT,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIc,EAAE,OAAQ,eAAe,IAAI,KACr7D,IDWpB,EACA,KACA,WACA,M,iBEqBF,kCAEA,ICtC4L,EDsC5L,CACA,oBACA,YACA,mBACA,WACA,eAEA,YACA,oBAEA,OACA,SACA,YACA,aAEA,QACA,YACA,aAEA,WACA,WACA,aAEA,aACA,YACA,YACA,gBAEA,MACA,aACA,aAGA,KAjCA,WAkCA,OACA,eACA,cACA,WACA,YACA,WACA,oBACA,mBACA,cACA,gBAIA,UACA,SADA,WAEA,mCAGA,SACA,SADA,WACA,WACA,oBAEA,YACA,kCACA,uCACA,qCACA,yBAEA,uFACA,iBACA,qBAGA,KAfA,WAeA,WACA,mBAEA,YACA,0BACA,uCACA,uCAEA,6EACA,iBACA,oBAGA,kBA5BA,SA4BA,GACA,IAWA,EAXA,iBACA,6BACA,MAIA,uCAOA,EADA,MACA,OAEA,QAUA,mBACA,eACA,QACA,uCACA,qCACA,oBAXA,uDAZA,0EAJA,iEA+BA,SA/DA,SA+DA,KACA,qCACA,oBAGA,eApEA,SAoEA,GACA,qBACA,gCAEA,MAKA,+CACA,iBAKA,WACA,eAEA,iBACA,WACA,WACA,MAOA,KALA,EADA,kBACA,OAEA,QASA,YALA,sEACA,YACA,MACA,kBAOA,mBACA,eACA,QACA,uCACA,qCACA,oBAGA,MACA,UACA,8BACA,YACA,4BACA,oFAEA,MACA,WACA,oDACA,YACA,oCACA,+FACA,MACA,cACA,4CACA,iBACA,YAGA,MACA,aACA,iEACA,YACA,iCACA,0BACA,oFAEA,MACA,QACA,8DAlEA,kGANA,wDEhJe,G,QAXC,YACd,GCTW,WAAa,IAAId,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,iBAAiB,CAACG,MAAM,CAAC,gBAAgBP,EAAI0D,OAAO,CAACtD,EAAG,mBAAmB,CAACuD,WAAW,CAAC,CAACC,KAAK,kBAAkBC,QAAQ,oBAAoBC,MAAO9D,EAAY,SAAE+D,WAAW,YAAY,CAACH,KAAK,SAASC,QAAQ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","file":"mail.8.7a9397f9d9ea3cf59023.js","sourcesContent":["import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=ec03f544&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=ec03f544&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.toggle[data-v-ec03f544] {\\n\\tposition: fixed;\\n\\tdisplay: inline-block;\\n\\tleft: 0;\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tz-index: 1500;\\n\\tcursor: pointer;\\n\\ttransform: rotate(180deg);\\n\\tbackground-color: var(--color-main-background);\\n\\topacity: 1;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var map = {\n\t\"./af\": 901,\n\t\"./af.js\": 901,\n\t\"./ar\": 902,\n\t\"./ar-dz\": 903,\n\t\"./ar-dz.js\": 903,\n\t\"./ar-kw\": 904,\n\t\"./ar-kw.js\": 904,\n\t\"./ar-ly\": 905,\n\t\"./ar-ly.js\": 905,\n\t\"./ar-ma\": 906,\n\t\"./ar-ma.js\": 906,\n\t\"./ar-sa\": 907,\n\t\"./ar-sa.js\": 907,\n\t\"./ar-tn\": 908,\n\t\"./ar-tn.js\": 908,\n\t\"./ar.js\": 902,\n\t\"./az\": 909,\n\t\"./az.js\": 909,\n\t\"./be\": 910,\n\t\"./be.js\": 910,\n\t\"./bg\": 911,\n\t\"./bg.js\": 911,\n\t\"./bm\": 912,\n\t\"./bm.js\": 912,\n\t\"./bn\": 913,\n\t\"./bn.js\": 913,\n\t\"./bo\": 914,\n\t\"./bo.js\": 914,\n\t\"./br\": 915,\n\t\"./br.js\": 915,\n\t\"./bs\": 916,\n\t\"./bs.js\": 916,\n\t\"./ca\": 917,\n\t\"./ca.js\": 917,\n\t\"./cs\": 918,\n\t\"./cs.js\": 918,\n\t\"./cv\": 919,\n\t\"./cv.js\": 919,\n\t\"./cy\": 920,\n\t\"./cy.js\": 920,\n\t\"./da\": 921,\n\t\"./da.js\": 921,\n\t\"./de\": 922,\n\t\"./de-at\": 923,\n\t\"./de-at.js\": 923,\n\t\"./de-ch\": 924,\n\t\"./de-ch.js\": 924,\n\t\"./de.js\": 922,\n\t\"./dv\": 925,\n\t\"./dv.js\": 925,\n\t\"./el\": 926,\n\t\"./el.js\": 926,\n\t\"./en-SG\": 927,\n\t\"./en-SG.js\": 927,\n\t\"./en-au\": 928,\n\t\"./en-au.js\": 928,\n\t\"./en-ca\": 929,\n\t\"./en-ca.js\": 929,\n\t\"./en-gb\": 930,\n\t\"./en-gb.js\": 930,\n\t\"./en-ie\": 931,\n\t\"./en-ie.js\": 931,\n\t\"./en-il\": 932,\n\t\"./en-il.js\": 932,\n\t\"./en-nz\": 933,\n\t\"./en-nz.js\": 933,\n\t\"./eo\": 934,\n\t\"./eo.js\": 934,\n\t\"./es\": 935,\n\t\"./es-do\": 936,\n\t\"./es-do.js\": 936,\n\t\"./es-us\": 937,\n\t\"./es-us.js\": 937,\n\t\"./es.js\": 935,\n\t\"./et\": 938,\n\t\"./et.js\": 938,\n\t\"./eu\": 939,\n\t\"./eu.js\": 939,\n\t\"./fa\": 940,\n\t\"./fa.js\": 940,\n\t\"./fi\": 941,\n\t\"./fi.js\": 941,\n\t\"./fo\": 942,\n\t\"./fo.js\": 942,\n\t\"./fr\": 943,\n\t\"./fr-ca\": 944,\n\t\"./fr-ca.js\": 944,\n\t\"./fr-ch\": 945,\n\t\"./fr-ch.js\": 945,\n\t\"./fr.js\": 943,\n\t\"./fy\": 946,\n\t\"./fy.js\": 946,\n\t\"./ga\": 947,\n\t\"./ga.js\": 947,\n\t\"./gd\": 948,\n\t\"./gd.js\": 948,\n\t\"./gl\": 949,\n\t\"./gl.js\": 949,\n\t\"./gom-latn\": 950,\n\t\"./gom-latn.js\": 950,\n\t\"./gu\": 951,\n\t\"./gu.js\": 951,\n\t\"./he\": 952,\n\t\"./he.js\": 952,\n\t\"./hi\": 953,\n\t\"./hi.js\": 953,\n\t\"./hr\": 954,\n\t\"./hr.js\": 954,\n\t\"./hu\": 955,\n\t\"./hu.js\": 955,\n\t\"./hy-am\": 956,\n\t\"./hy-am.js\": 956,\n\t\"./id\": 957,\n\t\"./id.js\": 957,\n\t\"./is\": 958,\n\t\"./is.js\": 958,\n\t\"./it\": 959,\n\t\"./it-ch\": 960,\n\t\"./it-ch.js\": 960,\n\t\"./it.js\": 959,\n\t\"./ja\": 961,\n\t\"./ja.js\": 961,\n\t\"./jv\": 962,\n\t\"./jv.js\": 962,\n\t\"./ka\": 963,\n\t\"./ka.js\": 963,\n\t\"./kk\": 964,\n\t\"./kk.js\": 964,\n\t\"./km\": 965,\n\t\"./km.js\": 965,\n\t\"./kn\": 966,\n\t\"./kn.js\": 966,\n\t\"./ko\": 967,\n\t\"./ko.js\": 967,\n\t\"./ku\": 968,\n\t\"./ku.js\": 968,\n\t\"./ky\": 969,\n\t\"./ky.js\": 969,\n\t\"./lb\": 970,\n\t\"./lb.js\": 970,\n\t\"./lo\": 971,\n\t\"./lo.js\": 971,\n\t\"./lt\": 972,\n\t\"./lt.js\": 972,\n\t\"./lv\": 973,\n\t\"./lv.js\": 973,\n\t\"./me\": 974,\n\t\"./me.js\": 974,\n\t\"./mi\": 975,\n\t\"./mi.js\": 975,\n\t\"./mk\": 976,\n\t\"./mk.js\": 976,\n\t\"./ml\": 977,\n\t\"./ml.js\": 977,\n\t\"./mn\": 978,\n\t\"./mn.js\": 978,\n\t\"./mr\": 979,\n\t\"./mr.js\": 979,\n\t\"./ms\": 980,\n\t\"./ms-my\": 981,\n\t\"./ms-my.js\": 981,\n\t\"./ms.js\": 980,\n\t\"./mt\": 982,\n\t\"./mt.js\": 982,\n\t\"./my\": 983,\n\t\"./my.js\": 983,\n\t\"./nb\": 984,\n\t\"./nb.js\": 984,\n\t\"./ne\": 985,\n\t\"./ne.js\": 985,\n\t\"./nl\": 986,\n\t\"./nl-be\": 987,\n\t\"./nl-be.js\": 987,\n\t\"./nl.js\": 986,\n\t\"./nn\": 988,\n\t\"./nn.js\": 988,\n\t\"./pa-in\": 989,\n\t\"./pa-in.js\": 989,\n\t\"./pl\": 990,\n\t\"./pl.js\": 990,\n\t\"./pt\": 991,\n\t\"./pt-br\": 992,\n\t\"./pt-br.js\": 992,\n\t\"./pt.js\": 991,\n\t\"./ro\": 993,\n\t\"./ro.js\": 993,\n\t\"./ru\": 994,\n\t\"./ru.js\": 994,\n\t\"./sd\": 995,\n\t\"./sd.js\": 995,\n\t\"./se\": 996,\n\t\"./se.js\": 996,\n\t\"./si\": 997,\n\t\"./si.js\": 997,\n\t\"./sk\": 998,\n\t\"./sk.js\": 998,\n\t\"./sl\": 999,\n\t\"./sl.js\": 999,\n\t\"./sq\": 1000,\n\t\"./sq.js\": 1000,\n\t\"./sr\": 1001,\n\t\"./sr-cyrl\": 1002,\n\t\"./sr-cyrl.js\": 1002,\n\t\"./sr.js\": 1001,\n\t\"./ss\": 1003,\n\t\"./ss.js\": 1003,\n\t\"./sv\": 1004,\n\t\"./sv.js\": 1004,\n\t\"./sw\": 1005,\n\t\"./sw.js\": 1005,\n\t\"./ta\": 1006,\n\t\"./ta.js\": 1006,\n\t\"./te\": 1007,\n\t\"./te.js\": 1007,\n\t\"./tet\": 1008,\n\t\"./tet.js\": 1008,\n\t\"./tg\": 1009,\n\t\"./tg.js\": 1009,\n\t\"./th\": 1010,\n\t\"./th.js\": 1010,\n\t\"./tl-ph\": 1011,\n\t\"./tl-ph.js\": 1011,\n\t\"./tlh\": 1012,\n\t\"./tlh.js\": 1012,\n\t\"./tr\": 1013,\n\t\"./tr.js\": 1013,\n\t\"./tzl\": 1014,\n\t\"./tzl.js\": 1014,\n\t\"./tzm\": 1015,\n\t\"./tzm-latn\": 1016,\n\t\"./tzm-latn.js\": 1016,\n\t\"./tzm.js\": 1015,\n\t\"./ug-cn\": 1017,\n\t\"./ug-cn.js\": 1017,\n\t\"./uk\": 1018,\n\t\"./uk.js\": 1018,\n\t\"./ur\": 1019,\n\t\"./ur.js\": 1019,\n\t\"./uz\": 1020,\n\t\"./uz-latn\": 1021,\n\t\"./uz-latn.js\": 1021,\n\t\"./uz.js\": 1020,\n\t\"./vi\": 1022,\n\t\"./vi.js\": 1022,\n\t\"./x-pseudo\": 1023,\n\t\"./x-pseudo.js\": 1023,\n\t\"./yo\": 1024,\n\t\"./yo.js\": 1024,\n\t\"./zh-cn\": 1025,\n\t\"./zh-cn.js\": 1025,\n\t\"./zh-hk\": 1026,\n\t\"./zh-hk.js\": 1026,\n\t\"./zh-tw\": 1027,\n\t\"./zh-tw.js\": 1027\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1209;","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=1159209c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=1159209c&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"../../img/reply.svg\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\nexports.push([module.id, \".mail-message-account-color[data-v-1159209c]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.app-content-list-item.unseen[data-v-1159209c]{font-weight:bold}.app-content-list-item.draft .app-content-list-item-line-two[data-v-1159209c]{font-style:italic}.icon-reply[data-v-1159209c],.icon-attachment[data-v-1159209c]{display:inline-block;vertical-align:text-top}.icon-reply[data-v-1159209c]{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';opacity:0.5}.icon-attachment[data-v-1159209c]{-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';opacity:0.25}.app-content-list-item-line-two[data-v-1159209c],.app-content-list-item-menu[data-v-1159209c]{margin-top:-8px}.app-content-list-item-menu[data-v-1159209c]{margin-right:-2px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYiIHdpZHRoPSIxNiI+PHBhdGggZD0iTTE1IDE1cy0uNC03LjgtNy0xMFYxTDEgOGw3IDd2LTRjNS4xIDAgNyA0IDcgNHoiLz48L3N2Zz4=\"","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=1f409bfa&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=1f409bfa&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n#load-more-mail-messages[data-v-1f409bfa] {\\n\\tmargin: 10px auto;\\n\\tpadding: 10px;\\n\\tmargin-top: 50px;\\n\\tmargin-bottom: 200px;\\n}\\n\\n/* TODO: put this in core icons.css as general rule for buttons with icons */\\n#load-more-mail-messages.icon-loading-small[data-v-1f409bfa] {\\n\\tpadding-left: 32px;\\n\\tbackground-position: 9px center;\\n}\\n#list-refreshing[data-v-1f409bfa] {\\n\\toverflow-y: hidden;\\n\\tmin-height: 0;\\n\\ttransition-property: all;\\n\\ttransition-duration: 0.5s;\\n\\ttransition-timing-function: ease-in-out;\\n}\\n#list-refreshing.refreshing[data-v-1f409bfa] {\\n\\tmin-height: 32px;\\n}\\n.list-enter-active[data-v-1f409bfa],\\n.list-leave-active[data-v-1f409bfa] {\\n\\ttransition: all var(--animation-quick);\\n}\\n.list-enter[data-v-1f409bfa],\\n.list-leave-to[data-v-1f409bfa] {\\n\\topacity: 0;\\n\\theight: 0px;\\n\\ttransform: scaleY(0);\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=b923b46c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=b923b46c&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.reservation[data-v-b923b46c] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.event[data-v-b923b46c] {\\n\\tflex-grow: 1;\\n}\\n.event-name[data-v-b923b46c] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=5dfcd8b6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=5dfcd8b6&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.reservation[data-v-5dfcd8b6] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-5dfcd8b6],\\n.arrival[data-v-5dfcd8b6] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-5dfcd8b6],\\n.arrival[data-v-5dfcd8b6],\\n.connection[data-v-5dfcd8b6] {\\n\\tjustify-content: center;\\n}\\n.iata[data-v-5dfcd8b6] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.airport[data-v-5dfcd8b6] {\\n\\tfont-size: large;\\n}\\n.departure[data-v-5dfcd8b6] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-5dfcd8b6] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=5978d1e8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=5978d1e8&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.reservation[data-v-5978d1e8] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-5978d1e8],\\n.arrival[data-v-5978d1e8] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-5978d1e8],\\n.arrival[data-v-5978d1e8],\\n.connection[data-v-5978d1e8] {\\n\\tjustify-content: center;\\n}\\n.station[data-v-5978d1e8] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.departure[data-v-5978d1e8] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-5978d1e8] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=5473b814&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=5473b814&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#mail-content[data-v-5473b814]{margin-left:30px;margin-top:2px}#mail-message-has-blocked-content[data-v-5473b814]{margin-left:8px}#message-container[data-v-5473b814]{position:relative;width:100%;height:0;padding-bottom:56.25%}#message-frame[data-v-5473b814]{position:absolute;top:0;left:0;width:100%;height:100%}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=375b1446&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=375b1446&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.mail-signature[data-v-375b1446] {\\n\\tfont-family: monospace;\\n\\topacity: 0.5;\\n\\tline-height: initial;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=7f3ec3f9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=7f3ec3f9&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.attachment[data-v-7f3ec3f9] {\\n\\tposition: relative;\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: 3px;\\n\\tmargin: 0 10px 10px 0;\\n\\tpadding: 5px;\\n}\\n.attachment[data-v-7f3ec3f9]:hover,\\n.attachment span[data-v-7f3ec3f9]:hover {\\n\\tbackground-color: var(--color-background-dark);\\n\\tcursor: pointer;\\n}\\n@media only screen and (max-width: 768px) {\\n.attachment[data-v-7f3ec3f9] {\\n\\t\\twidth: calc(100% - 5px);\\n}\\n}\\n@media only screen and (min-width: 769px) and (max-width: 1400px) {\\n.attachment[data-v-7f3ec3f9] {\\n\\t\\twidth: calc(50% - 10px);\\n}\\n}\\n@media only screen and (min-width: 1401px) {\\n.attachment[data-v-7f3ec3f9] {\\n\\t\\twidth: calc(33% - 12px);\\n}\\n}\\n.mail-attached-image[data-v-7f3ec3f9] {\\n\\tdisplay: block;\\n\\tmax-width: 100%;\\n\\tmax-height: 120px;\\n\\tcursor: pointer;\\n}\\n.mail-attached-image[data-v-7f3ec3f9]:hover {\\n\\topacity: 0.8;\\n}\\n.attachment-save-to-cloud[data-v-7f3ec3f9],\\n.attachment-download[data-v-7f3ec3f9],\\n.attachment-import[data-v-7f3ec3f9] {\\n\\tposition: absolute;\\n\\theight: 32px;\\n\\twidth: 32px;\\n\\tmargin: 0;\\n\\tbottom: 0;\\n\\tbackground-color: transparent;\\n\\tborder-color: transparent;\\n}\\n.attachment-save-to-cloud[data-v-7f3ec3f9] {\\n\\tright: 0;\\n}\\n.attachment-download[data-v-7f3ec3f9] {\\n\\tright: 32px;\\n\\topacity: 0.6;\\n}\\n.attachment-import[data-v-7f3ec3f9] {\\n\\tright: 64px;\\n}\\n.attachment-import-popover[data-v-7f3ec3f9] {\\n\\tright: 32px;\\n\\ttop: 42px;\\n}\\n.attachment-import-popover[data-v-7f3ec3f9]::after {\\n\\tright: 32px;\\n}\\n.attachment-name[data-v-7f3ec3f9] {\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 108px);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tvertical-align: middle;\\n}\\n\\n/* show attachment size less prominent */\\n.attachment-size[data-v-7f3ec3f9] {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n.attachment-icon[data-v-7f3ec3f9] {\\n\\tvertical-align: middle;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.mail-message-attachments {\\n\\tmargin-bottom: 20px;\\n}\\n\\n/* show icon + text for Download all button\\n\\t\\tas well as when there is only one attachment */\\n.attachments-save-to-cloud {\\n\\tbackground-position: 9px center;\\n\\tpadding-left: 32px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#mail-message{flex-grow:1}.mail-message-body{margin-bottom:100px}#mail-message-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%}#mail-message-header-fields{width:0;padding-left:38px;flex:1 1 auto}#mail-message-header-fields h2,#mail-message-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-message-header-fields .transparency{opacity:0.6}#mail-message-header-fields .transparency a{font-weight:bold}#mail-content,.mail-message-attachments{margin:10px 38px 50px 38px}.mail-message-attachments{margin-top:10px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}#mail-message-actions{display:flex;flex-direction:row;justify-content:flex-end;margin-left:10px;margin-right:22px;height:44px}.icon-reply-white,.icon-reply-all-white{height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}#mail-message-actions-menu{margin-left:4px}@media print{#mail-message-header-fields{position:relative}#header,#app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.mail-message-attachments{display:none !important}#app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=84fc7730&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=84fc7730&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\nbutton[data-v-84fc7730] {\\n\\t/* TODO: remove for Nextcloud 15+ */\\n\\t/* https://github.com/nextcloud/server/pull/12138 */\\n\\tdisplay: inline-block;\\n}\\n.new-message-attachments li[data-v-84fc7730] {\\n\\tpadding: 10px;\\n}\\n.new-message-attachments-action[data-v-84fc7730] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 22px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name[data-v-84fc7730] {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing[data-v-84fc7730] {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning[data-v-84fc7730] {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-84fc7730] {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n.attachments-upload-progress[data-v-84fc7730] {\\n\\tdisplay: flex;\\n}\\n.attachments-upload-progress > div[data-v-84fc7730] {\\n\\tpadding-left: 3px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=5d616abc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=5d616abc&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".message-composer[data-v-5d616abc]{margin:0;z-index:100}.composer-actions[data-v-5d616abc]{display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;position:sticky;bottom:0;padding:12px;background:linear-gradient(transparent, var(--color-main-background-translucent) 50%)}.composer-actions-right[data-v-5d616abc]{display:flex;align-items:center}.composer-fields[data-v-5d616abc]{display:flex;align-items:center;border-top:1px solid var(--color-border)}.composer-fields.mail-account[data-v-5d616abc]{border-top:none}.composer-fields.mail-account>.multiselect[data-v-5d616abc]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-5d616abc],.composer-fields input[data-v-5d616abc],.composer-fields TextEditor[data-v-5d616abc]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .multiselect[data-v-5d616abc]{margin-right:12px}.subject[data-v-5d616abc]{font-size:20px;font-weight:bold;margin:0;padding:24px 12px}.noreply-box[data-v-5d616abc]{padding:5px 12px;border-radius:0}.message-body[data-v-5d616abc]{min-height:300px;width:100%;margin:0;padding:12px;padding-top:0;border:none !important;outline:none !important;box-shadow:none !important}#draft-status[data-v-5d616abc]{padding:5px;opacity:0.5;font-size:small}.from-label[data-v-5d616abc],.to-label[data-v-5d616abc],.copy-toggle[data-v-5d616abc],.cc-label[data-v-5d616abc],.bcc-label[data-v-5d616abc]{padding:12px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bcc-label[data-v-5d616abc]{top:initial;bottom:0}.copy-toggle[data-v-5d616abc]{cursor:pointer;width:initial}.copy-toggle[data-v-5d616abc]:hover,.copy-toggle[data-v-5d616abc]:focus{color:var(--color-main-text)}.reply[data-v-5d616abc]{min-height:100px}.send[data-v-5d616abc]{padding:12px 18px 13px 36px;background-position:12px center;margin-left:4px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=1&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.multiselect .multiselect__tags {\\n\\tborder: none !important;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=ef526768&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=ef526768&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.app-content-details[data-v-ef526768] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n}\\n.icon[data-v-ef526768] {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\nh2[data-v-ef526768],\\np[data-v-ef526768] {\\n\\ttext-align: center;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=1fd66e6e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=1fd66e6e&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-1fd66e6e] #app-content #app-content-wrapper .app-content-details{margin:0 auto;max-width:900px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{directives:[{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(['c']),expression:\"['c']\",modifiers:{\"once\":true}}],attrs:{\"app-name\":\"mail\"},nativeOn:{\"shortkey\":function($event){return _vm.onNewMessage($event)}}},[_c('Navigation'),_vm._v(\" \"),(_vm.activeAccount)?_c('FolderContent',{attrs:{\"account\":_vm.activeAccount,\"folder\":_vm.activeFolder}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div v-if=\"isMobile\" class=\"toggle icon-confirm\" tabindex=\"0\" @click=\"$emit('close')\"></div>\n</template>\n\n<script>\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\n\nexport default {\n\tname: 'AppDetailsToggle',\n\tmixins: [isMobile],\n}\n</script>\n\n<style scoped>\n.toggle {\n\tposition: fixed;\n\tdisplay: inline-block;\n\tleft: 0;\n\twidth: 44px;\n\theight: 44px;\n\tz-index: 1500;\n\tcursor: pointer;\n\ttransform: rotate(180deg);\n\tbackground-color: var(--color-main-background);\n\topacity: 1;\n}\n</style>\n","import { render, staticRenderFns } from \"./AppDetailsToggle.vue?vue&type=template&id=ec03f544&scoped=true&\"\nimport script from \"./AppDetailsToggle.vue?vue&type=script&lang=js&\"\nexport * from \"./AppDetailsToggle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppDetailsToggle.vue?vue&type=style&index=0&id=ec03f544&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ec03f544\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isMobile)?_c('div',{staticClass:\"toggle icon-confirm\",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.$emit('close')}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyFolder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyFolder.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<div class=\"icon-mail\"></div>\n\t\t<h2>{{ t('mail', 'No messages in this folder') }}</h2>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyFolder',\n}\n</script>\n","import { render, staticRenderFns } from \"./EmptyFolder.vue?vue&type=template&id=3eaae910&\"\nimport script from \"./EmptyFolder.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyFolder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No messages in this folder')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"","<template>\n\t<span class=\"live-relative-timestamp\" :data-timestamp=\"timestamp * 1000\" :title=\"title\">{{ formatted }}</span>\n</template>\n\n<script>\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'Moment',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\tdefault: 'LLL',\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn moment.unix(this.timestamp).format(this.format)\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.timestamp).fromNow()\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Moment.vue?vue&type=template&id=4e73ee46&\"\nimport script from \"./Moment.vue?vue&type=script&lang=js&\"\nexport * from \"./Moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"live-relative-timestamp\",attrs:{\"data-timestamp\":_vm.timestamp * 1000,\"title\":_vm.title}},[_vm._v(_vm._s(_vm.formatted))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport memoize from 'lodash/fp/memoize'\nimport Axios from '@nextcloud/axios'\nimport {generateUrl} from '@nextcloud/router'\n\nexport const fetchAvatarUrl = email => {\n\tif (email === null) {\n\t\treturn Promise.resolve(undefined)\n\t}\n\n\tconst url = generateUrl('/apps/mail/api/avatars/url/{email}', {\n\t\temail,\n\t})\n\n\treturn Axios.get(url)\n\t\t.then(resp => resp.data)\n\t\t.then(avatar => {\n\t\t\tif (avatar.isExternal) {\n\t\t\t\treturn generateUrl('/apps/mail/api/avatars/image/{email}', {\n\t\t\t\t\temail: email,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn avatar.url\n\t\t\t}\n\t\t})\n\t\t.catch(err => {\n\t\t\tif (err.response.status === 404) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn Promise.reject(err)\n\t\t})\n}\n\nexport const fetchAvatarUrlMemoized = memoize(fetchAvatarUrl)\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<BaseAvatar v-if=\"loading || !hasAvatar\" :display-name=\"displayName\" :size=\"40\" />\n\t<BaseAvatar v-else :display-name=\"displayName\" :url=\"avatarUrl\" :size=\"40\" />\n</template>\n\n<script>\nimport BaseAvatar from '@nextcloud/vue/dist/Components/Avatar'\n\nimport {fetchAvatarUrlMemoized} from '../service/AvatarService'\n\nexport default {\n\tname: 'Avatar',\n\tcomponents: {\n\t\tBaseAvatar,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAvatar() {\n\t\t\treturn this.avatarUrl !== undefined\n\t\t},\n\t},\n\tmounted() {\n\t\tfetchAvatarUrlMemoized(this.email).then(url => {\n\t\t\tthis.avatarUrl = url\n\t\t\tthis.loading = false\n\t\t})\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=13b7e539&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loading || !_vm.hasAvatar)?_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"size\":40}}):_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"url\":_vm.avatarUrl,\"size\":40}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"","<template>\n\t<router-link class=\"app-content-list-item\" :class=\"{unseen: data.flags.unseen, draft}\" :to=\"link\">\n\t\t<div\n\t\t\tv-if=\"folder.isUnified\"\n\t\t\tclass=\"mail-message-account-color\"\n\t\t\t:style=\"{'background-color': accountColor}\"\n\t\t></div>\n\t\t<div\n\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t:data-starred=\"data.flags.flagged ? 'true' : 'false'\"\n\t\t\t@click.prevent=\"onToggleFlagged\"\n\t\t></div>\n\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t<Avatar :display-name=\"addresses\" :email=\"avatarEmail\" />\n\t\t</div>\n\t\t<div class=\"app-content-list-item-line-one\" :title=\"addresses\">\n\t\t\t{{ addresses }}\n\t\t</div>\n\t\t<div class=\"app-content-list-item-line-two\" :title=\"data.subject\">\n\t\t\t<span v-if=\"data.flags.answered\" class=\"icon-reply\" />\n\t\t\t<span v-if=\"data.flags.hasAttachments\" class=\"icon-public icon-attachment\" />\n\t\t\t<span v-if=\"draft\" class=\"draft\">\n\t\t\t\t<em>{{ t('mail', 'Draft: ') }}</em>\n\t\t\t</span>\n\t\t\t{{ data.subject }}\n\t\t</div>\n\t\t<div class=\"app-content-list-item-details date\">\n\t\t\t<Moment :timestamp=\"data.dateInt\" />\n\t\t</div>\n\t\t<Actions class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t<ActionButton icon=\"icon-mail\" @click.prevent=\"onToggleSeen\">{{\n\t\t\t\tdata.flags.unseen ? t('mail', 'Mark read') : t('mail', 'Mark unread')\n\t\t\t}}</ActionButton>\n\t\t\t<ActionButton icon=\"icon-delete\" @click.prevent=\"onDelete\">{{ t('mail', 'Delete') }}</ActionButton>\n\t\t</Actions>\n\t</router-link>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Moment from './Moment'\n\nimport Avatar from './Avatar'\nimport {calculateAccountColor} from '../util/AccountColor'\n\nexport default {\n\tname: 'Envelope',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tAvatar,\n\t\tMoment,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\taccountColor() {\n\t\t\treturn calculateAccountColor(this.$store.getters.getAccount(this.data.accountId).emailAddress)\n\t\t},\n\t\tdraft() {\n\t\t\treturn this.data.flags.draft\n\t\t},\n\t\tlink() {\n\t\t\tif (this.draft) {\n\t\t\t\t// TODO: does not work with a unified drafts folder\n\t\t\t\t//       the query should also contain the account and folder\n\t\t\t\t//       id for that to work\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t\t\tdraftUid: this.data.uid,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\tmessageUid: this.data.uid,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddresses() {\n\t\t\t// Show recipients' label/address in a sent folder\n\t\t\tif (this.folder.specialRole === 'sent') {\n\t\t\t\tlet recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.label ? recipient.label : recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients.join(', ') : t('mail', 'Blind copy recipients only')\n\t\t\t}\n\t\t\t// Show sender label/address in other folder types\n\t\t\treturn this.data.from.length === 0 ? '?' : this.data.from[0].label || this.data.from[0].email\n\t\t},\n\t\tavatarEmail() {\n\t\t\t// Show first recipients' avatar in a sent folder (or undefined when sent to Bcc only)\n\t\t\tif (this.folder.specialRole === 'sent') {\n\t\t\t\tlet recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients[0] : undefined\n\t\t\t}\n\n\t\t\t// Show sender avatar in other folder types\n\t\t\tif (this.data.from.length > 0) {\n\t\t\t\treturn this.data.from[0].email\n\t\t\t} else {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.data)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', this.data)\n\t\t},\n\t\tonDelete(e) {\n\t\t\t// Don't navigate to the deleted message\n\t\t\te.preventDefault()\n\n\t\t\tthis.$emit('delete', this.data)\n\t\t\tthis.$store.dispatch('deleteMessage', this.data)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.app-content-list-item.unseen {\n\tfont-weight: bold;\n}\n.app-content-list-item.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n\n.icon-reply,\n.icon-attachment {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.icon-reply {\n\tbackground-image: url('../../img/reply.svg');\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n// Fix layout of messages in list until we move to component\n\n.app-content-list-item-line-two,\n.app-content-list-item-menu {\n\tmargin-top: -8px;\n}\n\n.app-content-list-item-menu {\n\tmargin-right: -2px;\n}\n</style>\n","import { render, staticRenderFns } from \"./Envelope.vue?vue&type=template&id=1159209c&scoped=true&\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js&\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Envelope.vue?vue&type=style&index=0&id=1159209c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1159209c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-link',{staticClass:\"app-content-list-item\",class:{unseen: _vm.data.flags.unseen, draft: _vm.draft},attrs:{\"to\":_vm.link}},[(_vm.folder.isUnified)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.data.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-icon\"},[_c('Avatar',{attrs:{\"display-name\":_vm.addresses,\"email\":_vm.avatarEmail}})],1),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-line-one\",attrs:{\"title\":_vm.addresses}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.addresses)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-line-two\",attrs:{\"title\":_vm.data.subject}},[(_vm.data.flags.answered)?_c('span',{staticClass:\"icon-reply\"}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.hasAttachments)?_c('span',{staticClass:\"icon-public icon-attachment\"}):_vm._e(),_vm._v(\" \"),(_vm.draft)?_c('span',{staticClass:\"draft\"},[_c('em',[_vm._v(_vm._s(_vm.t('mail', 'Draft: ')))])]):_vm._e(),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.data.subject)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-details date\"},[_c('Moment',{attrs:{\"timestamp\":_vm.data.dateInt}})],1),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"menu-align\":\"right\"}},[_c('ActionButton',{attrs:{\"icon\":\"icon-mail\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen($event)}}},[_vm._v(_vm._s(_vm.data.flags.unseen ? _vm.t('mail', 'Mark read') : _vm.t('mail', 'Mark unread')))]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete($event)}}},[_vm._v(_vm._s(_vm.t('mail', 'Delete')))])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<AppContentList :show-details=\"!show\">\n\t\t<transition-group\n\t\t\tv-infinite-scroll=\"loadMore\"\n\t\t\tv-scroll=\"onScroll\"\n\t\t\tv-shortkey.once=\"shortkeys\"\n\t\t\tname=\"list\"\n\t\t\tinfinite-scroll-disabled=\"loading\"\n\t\t\tinfinite-scroll-distance=\"30\"\n\t\t\t@shortkey.native=\"handleShortcut\"\n\t\t>\n\t\t\t<div id=\"list-refreshing\" key=\"loading\" class=\"icon-loading-small\" :class=\"{refreshing: refreshing}\" />\n\t\t\t<EmptyFolder v-if=\"envelopes.length === 0\" key=\"empty\" />\n\t\t\t<Envelope\n\t\t\t\tv-for=\"env in envelopes\"\n\t\t\t\tv-else\n\t\t\t\t:key=\"env.uid\"\n\t\t\t\t:data=\"env\"\n\t\t\t\t:folder=\"folder\"\n\t\t\t\t@delete=\"onEnvelopeDeleted\"\n\t\t\t/>\n\t\t\t<div id=\"load-more-mail-messages\" key=\"loadingMore\" :class=\"{'icon-loading-small': loadingMore}\" />\n\t\t</transition-group>\n\t</AppContentList>\n</template>\n\n<script>\nimport AppContentList from '@nextcloud/vue/dist/Components/AppContentList'\nimport infiniteScroll from 'vue-infinite-scroll'\nimport vuescroll from 'vue-scroll'\nimport Vue from 'vue'\n\nimport EmptyFolder from './EmptyFolder'\nimport Envelope from './Envelope'\nimport Logger from '../logger'\n\nVue.use(vuescroll, {throttle: 600})\n\nexport default {\n\tname: 'EnvelopeList',\n\tcomponents: {\n\t\tAppContentList,\n\t\tEnvelope,\n\t\tEmptyFolder,\n\t},\n\tdirectives: {\n\t\tinfiniteScroll,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloadingMore: false,\n\t\t\trefreshing: false,\n\t\t\tshortkeys: {\n\t\t\t\tdel: ['del'],\n\t\t\t\tflag: ['s'],\n\t\t\t\tnext: ['arrowright'],\n\t\t\t\tprev: ['arrowleft'],\n\t\t\t\trefresh: ['r'],\n\t\t\t\tunseen: ['u'],\n\t\t\t},\n\t\t}\n\t},\n\tcomputed: {\n\t\tisSearch() {\n\t\t\treturn this.searchQuery !== undefined\n\t\t},\n\t},\n\tmethods: {\n\t\tloadMore() {\n\t\t\tthis.loadingMore = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchNextEnvelopePage', {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error('could not fetch next envelope page', {error}))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingMore = false\n\t\t\t\t})\n\t\t},\n\t\tsync() {\n\t\t\tthis.refreshing = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('syncEnvelopes', {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error('could not sync envelopes', {error}))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.refreshing = false\n\t\t\t\t})\n\t\t},\n\t\tonEnvelopeDeleted(envelope) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst idx = this.envelopes.indexOf(envelope)\n\t\t\tif (idx === -1) {\n\t\t\t\tLogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (envelope.uid !== this.$route.params.messageUid) {\n\t\t\t\tLogger.debug('other message open, not jumping to the next/previous message')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet next\n\t\t\tif (idx === 0) {\n\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t} else {\n\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t}\n\n\t\t\tif (!next) {\n\t\t\t\tLogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected account-folder combination, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.accountId and next.folderId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: next.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonScroll(e, p) {\n\t\t\tif (p.scrollTop === 0 && !this.refreshing) {\n\t\t\t\treturn this.sync()\n\t\t\t}\n\t\t},\n\t\thandleShortcut(e) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst currentUid = this.$route.params.messageUid\n\n\t\t\tif (!currentUid) {\n\t\t\t\tLogger.debug('ignoring shortcut: no envelope selected')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst current = envelopes.filter(e => e.uid == currentUid)\n\t\t\tif (current.length === 0) {\n\t\t\t\tLogger.debug('ignoring shortcut: currently displayed messages is not in current envelope list')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst env = current[0]\n\t\t\tconst idx = envelopes.indexOf(env)\n\n\t\t\tswitch (e.srcKey) {\n\t\t\t\tcase 'next':\n\t\t\t\tcase 'prev':\n\t\t\t\t\tlet next\n\t\t\t\t\tif (e.srcKey === 'next') {\n\t\t\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!next) {\n\t\t\t\t\t\tLogger.debug('ignoring shortcut: head or tail of envelope list reached', {\n\t\t\t\t\t\t\tenvelopes,\n\t\t\t\t\t\t\tidx,\n\t\t\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\t// Keep the selected account-folder combination, but navigate to a different message\n\t\t\t\t\t// (it's not a bug that we don't use next.accountId and next.folderId here)\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\t\tmessageUid: next.uid,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tbreak\n\t\t\t\tcase 'del':\n\t\t\t\t\tLogger.debug('deleting', {env})\n\t\t\t\t\tthis.$store\n\t\t\t\t\t\t.dispatch('deleteMessage', env)\n\t\t\t\t\t\t.catch(error => Logger.error('could not delete envelope', {env, error}))\n\n\t\t\t\t\tbreak\n\t\t\t\tcase 'flag':\n\t\t\t\t\tLogger.debug('flagging envelope via shortkey', {env})\n\t\t\t\t\tthis.$store\n\t\t\t\t\t\t.dispatch('toggleEnvelopeFlagged', env)\n\t\t\t\t\t\t.catch(error => Logger.error('could not flag envelope via shortkey', {env, error}))\n\t\t\t\t\tbreak\n\t\t\t\tcase 'refresh':\n\t\t\t\t\tLogger.debug('syncing envelopes via shortkey')\n\t\t\t\t\tif (!this.refreshing) {\n\t\t\t\t\t\tthis.sync()\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\t\t\t\tcase 'unseen':\n\t\t\t\t\tLogger.debug('marking message as seen/unseen via shortkey', {env})\n\t\t\t\t\tthis.$store\n\t\t\t\t\t\t.dispatch('toggleEnvelopeSeen', env)\n\t\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\t\tLogger.error('could not mark envelope as seen/unseen via shortkey', {env, error})\n\t\t\t\t\t\t)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tLogger.warn('shortcut ' + e.srcKey + ' is unknown. ignoring.')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 200px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n#list-refreshing {\n\toverflow-y: hidden;\n\tmin-height: 0;\n\ttransition-property: all;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in-out;\n}\n\n#list-refreshing.refreshing {\n\tmin-height: 32px;\n}\n\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-quick);\n}\n\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EnvelopeList.vue?vue&type=template&id=1f409bfa&scoped=true&\"\nimport script from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopeList.vue?vue&type=style&index=0&id=1f409bfa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f409bfa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentList',{attrs:{\"show-details\":!_vm.show}},[_c('transition-group',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"},{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.onScroll),expression:\"onScroll\"},{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(_vm.shortkeys),expression:\"shortkeys\",modifiers:{\"once\":true}}],attrs:{\"name\":\"list\",\"infinite-scroll-disabled\":\"loading\",\"infinite-scroll-distance\":\"30\"},nativeOn:{\"shortkey\":function($event){return _vm.handleShortcut($event)}}},[_c('div',{key:\"loading\",staticClass:\"icon-loading-small\",class:{refreshing: _vm.refreshing},attrs:{\"id\":\"list-refreshing\"}}),_vm._v(\" \"),(_vm.envelopes.length === 0)?_c('EmptyFolder',{key:\"empty\"}):_vm._l((_vm.envelopes),function(env){return _c('Envelope',{key:env.uid,attrs:{\"data\":env,\"folder\":_vm.folder},on:{\"delete\":_vm.onEnvelopeDeleted}})}),_vm._v(\" \"),_c('div',{key:\"loadingMore\",class:{'icon-loading-small': _vm.loadingMore},attrs:{\"id\":\"load-more-mail-messages\"}})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","<template>\n\t<div v-if=\"hint\" class=\"emptycontent\">\n\t\t<a class=\"icon-loading\"></a>\n\t\t<h2>{{ hint }}</h2>\n\t</div>\n\t<div v-else class=\"container icon-loading\"></div>\n</template>\n\n<script>\nexport default {\n\tname: 'Loading',\n\tprops: {\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=8aa72af6&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8aa72af6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hint)?_c('div',{staticClass:\"emptycontent\"},[_c('a',{staticClass:\"icon-loading\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.hint))])]):_c('div',{staticClass:\"container icon-loading\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Address.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Address.vue?vue&type=script&lang=js&\"","<template>\n\t<router-link v-if=\"email !== label\" v-tooltip.bottom=\"email\" :to=\"newMessageRoute\" exact>{{ label }}</router-link>\n\t<router-link v-else :to=\"newMessageRoute\" exact>{{ label }}</router-link>\n</template>\n\n<script>\nexport default {\n\tname: 'Address',\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tnewMessageRoute() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.email,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressList.vue?vue&type=script&lang=js&\"","<template>\n\t<span>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<Address :key=\"entry.email\" :email=\"entry.email\" :label=\"entry.label\" /><!--\n\t\t\t--><span v-if=\"idx + 1 < entries.length\" :key=\"entry.email\">, </span>\n\t\t</template>\n\t</span>\n</template>\n\n<script>\nimport Address from './Address'\n\nexport default {\n\tname: 'AddressList',\n\tcomponents: {\n\t\tAddress,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Address.vue?vue&type=template&id=c906dfca&\"\nimport script from \"./Address.vue?vue&type=script&lang=js&\"\nexport * from \"./Address.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.email !== _vm.label)?_c('router-link',{directives:[{name:\"tooltip\",rawName:\"v-tooltip.bottom\",value:(_vm.email),expression:\"email\",modifiers:{\"bottom\":true}}],attrs:{\"to\":_vm.newMessageRoute,\"exact\":\"\"}},[_vm._v(_vm._s(_vm.label))]):_c('router-link',{attrs:{\"to\":_vm.newMessageRoute,\"exact\":\"\"}},[_vm._v(_vm._s(_vm.label))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AddressList.vue?vue&type=template&id=b97504f8&\"\nimport script from \"./AddressList.vue?vue&type=script&lang=js&\"\nexport * from \"./AddressList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._l((_vm.entries),function(entry,idx){return [_c('Address',{key:entry.email,attrs:{\"email\":entry.email,\"label\":entry.label}}),(idx + 1 < _vm.entries.length)?_c('span',{key:entry.email},[_vm._v(\", \")]):_vm._e()]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport moment from '@nextcloud/moment'\nimport negate from 'lodash/fp/negate'\n\nexport const buildReplyBody = (original, from, date) => {\n\tconst start = '<p></p><p></p>'\n\tconst body = '<br>&gt; ' + original.replace(/\\n/g, '<br>&gt; ')\n\n\tif (from) {\n\t\tconst dateString = moment.unix(date).format('LLL')\n\t\treturn `${start}\"${from.label}\" ${from.email}  ${dateString}` + body\n\t} else {\n\t\treturn `${start}${body}`\n\t}\n}\n\nexport const buildHtmlReplyBody = (original, from, date) => {\n\tconst start = `<p></p><p></p>`\n\tconst body = `<blockquote>${original}</blockquote>`\n\n\tif (from) {\n\t\tconst dateString = moment.unix(date).format('LLL')\n\t\treturn `${start}\"${from.label}\" ${from.email}  ${dateString}<br>${body}`\n\t} else {\n\t\treturn `${start}${body}`\n\t}\n}\n\nconst RecipientType = Object.seal({\n\tNone: 0,\n\tTo: 1,\n\tCc: 2,\n})\n\nexport const buildRecipients = (envelope, ownAddress) => {\n\tlet recipientType = RecipientType.None\n\tconst isOwnAddress = a => a.email === ownAddress.email\n\tconst isNotOwnAddress = negate(isOwnAddress)\n\n\t// Locate why we received this envelope\n\t// Can be in 'to', 'cc' or unknown\n\tlet replyingAddress = envelope.to.find(isOwnAddress)\n\tif (replyingAddress !== undefined) {\n\t\trecipientType = RecipientType.To\n\t} else {\n\t\treplyingAddress = envelope.cc.find(isOwnAddress)\n\t\tif (replyingAddress !== undefined) {\n\t\t\trecipientType = RecipientType.Cc\n\t\t} else {\n\t\t\treplyingAddress = ownAddress\n\t\t}\n\t}\n\n\tlet to = []\n\tlet cc = []\n\tif (recipientType === RecipientType.To) {\n\t\t// Send to everyone except yourself, plus the original sender if not ourself\n\t\tto = envelope.to.filter(isNotOwnAddress)\n\t\tto = to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// CC remains the same\n\t\tcc = envelope.cc\n\t} else if (recipientType === RecipientType.Cc) {\n\t\t// Send to the same people, plus the sender if not ourself\n\t\tto = envelope.to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// All CC values are being kept except the replying address\n\t\tcc = envelope.cc.filter(isNotOwnAddress)\n\t} else {\n\t\t// Send to the same recipient and the sender (if not ourself) -> answer all\n\t\tto = envelope.to\n\t\tto = to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// Keep CC values\n\t\tcc = envelope.cc\n\t}\n\n\t// edge case: pure self-sent email\n\tif (to.length == 0) {\n\t\tto = envelope.from\n\t}\n\n\treturn {\n\t\tto,\n\t\tfrom: replyingAddress ? [replyingAddress] : [],\n\t\tcc,\n\t}\n}\n\nconst replyPrepends = [\n\t'antw',\n\t'atb',\n\t'aw',\n\t'bls',\n\t'odp',\n\t'r',\n\t're',\n\t'ref',\n\t'res',\n\t'rif',\n\t'sv',\n\t'v',\n\t'vs',\n\t'ynt',\n\t'',\n\t'',\n\t'',\n\t'',\n\t'',\n]\n\n/*\n * Ref https://tools.ietf.org/html/rfc5322#section-3.6.5\n */\nexport const buildReplySubject = original => {\n\tif (replyPrepends.some(prepend => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `RE: ${original}`\n}\n\n// TODO: https://en.wikipedia.org/wiki/List_of_email_subject_abbreviations#Abbreviations_in_other_languages\nconst forwardPrepends = [\n\t'doorst',\n\t'enc',\n\t'fs',\n\t'fw',\n\t'fwd',\n\t'i',\n\t'ilt',\n\t'pd',\n\t'rv',\n\t'tovbbts',\n\t'tr',\n\t'trs',\n\t'vb',\n\t'vl',\n\t'vs',\n\t'wg',\n\t'yml',\n\t'',\n\t'',\n\t' ',\n\t'',\n\t'',\n\t'',\n]\n\nexport const buildForwardSubject = original => {\n\tif (forwardPrepends.some(prepend => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `FWD: ${original}`\n}\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport IssueTemplateBuilder from 'nextcloud_issuetemplate_builder'\n\nconst flattenError = error => {\n\tlet text = ''\n\tif (error.type) {\n\t\ttext += error.type + ': '\n\t}\n\ttext += error.message\n\ttext += '\\n'\n\tif (error.trace) {\n\t\ttext += flattenTrace(error.trace)\n\t}\n\tif (error.stack) {\n\t\ttext += error.stack\n\t}\n\treturn text\n}\n\nconst flattenTrace = trace => {\n\treturn trace.reduce(function(acc, entry) {\n\t\tvar text = ''\n\t\tif (entry.class) {\n\t\t\ttext += '  at ' + entry.class + '::' + entry.function\n\t\t} else {\n\t\t\ttext += '  at ' + entry.function\n\t\t}\n\t\tif (entry.file) {\n\t\t\ttext += '\\n     ' + entry.file + ', line ' + entry.line\n\t\t}\n\t\treturn acc + text + '\\n'\n\t}, '')\n}\n\nexport const getReportUrl = error => {\n\tconsole.error(error)\n\tvar message = error.message || 'An unkown error occurred.'\n\tif (!message.endsWith('.')) {\n\t\tmessage += '.'\n\t}\n\tvar builder = new IssueTemplateBuilder()\n\tvar template = builder\n\t\t.addEmptyStepsToReproduce()\n\t\t.addExpectedActualBehaviour()\n\t\t.addLogs('Error', flattenError(error))\n\t\t.render()\n\n\treturn (\n\t\t'https://github.com/nextcloud/mail/issues/new' +\n\t\t'?title=' +\n\t\tencodeURIComponent(message) +\n\t\t'&body=' +\n\t\tencodeURIComponent(template)\n\t)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"emptycontent\">\n\t\t<h2>{{ error }}</h2>\n\t\t<p>{{ message }}</p>\n\t\t<p v-if=\"data && data.debug\">\n\t\t\t<a class=\"button\" :href=\"reportUrl\" target=\"_blank\" rel=\"noopener\">{{ t('mail', 'Report this bug') }}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport {getReportUrl} from '../util/CrashReport'\n\nexport default {\n\tname: 'Error',\n\tprops: {\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\treportUrl() {\n\t\t\treturn getReportUrl(this.data)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Error.vue?vue&type=template&id=255d6e54&\"\nimport script from \"./Error.vue?vue&type=script&lang=js&\"\nexport * from \"./Error.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.error))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.message))]),_vm._v(\" \"),(_vm.data && _vm.data.debug)?_c('p',[_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.reportUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(_vm._s(_vm.t('mail', 'Report this bug')))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport {translate as t} from '@nextcloud/l10n'\n\nconst smileys = [':-(', ':-/', ':-\\\\', ':-|', \":'-(\", \":'-/\", \":'-\\\\\", \":'-|\"]\n\nconst getRandomSmiley = () => {\n\treturn smileys[Math.floor(Math.random() * smileys.length)]\n}\n\n/**\n * @param {Folder} folder\n * @returns {string}\n */\nexport const getRandomFolderErrorMessage = folder => {\n\tconst folderName = folder.get('name')\n\tconst rawTexts = [\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'There was a problem loading {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t]\n\tconst texts = rawTexts.map(text => text.replace('{tag}', '<strong>').replace('{endtag}', '</strong>'))\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n\n/**\n * @returns {string}\n */\nexport const getRandomMessageErrorMessage = () => {\n\tconst texts = [\n\t\tt('mail', 'Could not load your message'),\n\t\tt('mail', 'Could not load the desired message'),\n\t\tt('mail', 'Could not load the message'),\n\t]\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport {Client} from 'davclient.js'\nimport ical from 'ical.js'\nimport {getCurrentUser, getRequestToken} from '@nextcloud/auth'\nimport {generateRemoteUrl} from '@nextcloud/router'\nimport Axios from '@nextcloud/axios'\n\nimport Logger from '../logger'\n\nconst client = new Client({\n\tbaseUrl: generateRemoteUrl('dav/calendars'),\n\txmlNamespaces: {\n\t\t'DAV:': 'd',\n\t\t'urn:ietf:params:xml:ns:caldav': 'c',\n\t\t'http://apple.com/ns/ical/': 'aapl',\n\t\t'http://owncloud.org/ns': 'oc',\n\t\t'http://calendarserver.org/ns/': 'cs',\n\t},\n})\nconst props = [\n\t'{DAV:}displayname',\n\t'{urn:ietf:params:xml:ns:caldav}calendar-description',\n\t'{urn:ietf:params:xml:ns:caldav}calendar-timezone',\n\t'{http://apple.com/ns/ical/}calendar-order',\n\t'{http://apple.com/ns/ical/}calendar-color',\n\t'{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set',\n\t'{http://owncloud.org/ns}calendar-enabled',\n\t'{DAV:}acl',\n\t'{DAV:}owner',\n\t'{http://owncloud.org/ns}invite',\n]\n\nconst getResponseCodeFromHTTPResponse = t => {\n\treturn parseInt(t.split(' ')[1])\n}\n\nconst getACLFromResponse = properties => {\n\tlet canWrite = false\n\tlet acl = properties['{DAV:}acl']\n\tif (acl) {\n\t\tfor (var k = 0; k < acl.length; k++) {\n\t\t\tvar href = acl[k].getElementsByTagNameNS('DAV:', 'href')\n\t\t\tif (href.length === 0) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\thref = href[0].textContent\n\t\t\tvar writeNode = acl[k].getElementsByTagNameNS('DAV:', 'write')\n\t\t\tif (writeNode.length > 0) {\n\t\t\t\tcanWrite = true\n\t\t\t}\n\t\t}\n\t}\n\tproperties.canWrite = canWrite\n}\n\nconst getCalendarData = properties => {\n\tgetACLFromResponse(properties)\n\n\tconst data = {\n\t\tdisplayname: properties['{DAV:}displayname'],\n\t\tcolor: properties['{http://apple.com/ns/ical/}calendar-color'],\n\t\torder: properties['{http://apple.com/ns/ical/}calendar-order'],\n\t\tcomponents: {\n\t\t\tvevent: false,\n\t\t},\n\t\twritable: properties.canWrite,\n\t}\n\n\tconst components = properties['{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set'] || []\n\tfor (let i = 0; i < components.length; i++) {\n\t\tvar name = components[i].attributes.getNamedItem('name').textContent.toLowerCase()\n\t\tif (Object.hasOwnProperty.call(data.components, name)) {\n\t\t\tdata.components[name] = true\n\t\t}\n\t}\n\n\treturn data\n}\n\n/**\n * @returns {Promise}\n */\nexport const getUserCalendars = () => {\n\tvar url = generateRemoteUrl('dav/calendars') + '/' + getCurrentUser().uid + '/'\n\n\treturn client\n\t\t.propFind(url, props, 1, {\n\t\t\trequesttoken: getRequestToken(),\n\t\t})\n\t\t.then(data => {\n\t\t\tconst calendars = []\n\n\t\t\tdata.body.forEach(cal => {\n\t\t\t\tif (cal.propStat.length < 1) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (getResponseCodeFromHTTPResponse(cal.propStat[0].status) === 200) {\n\t\t\t\t\tconst properties = getCalendarData(cal.propStat[0].properties)\n\t\t\t\t\tif (properties && properties.components.vevent && properties.writable === true) {\n\t\t\t\t\t\tproperties.url = cal.href\n\t\t\t\t\t\tcalendars.push(properties)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn calendars\n\t\t})\n}\n\nconst getRandomString = () => {\n\tlet str = ''\n\tfor (let i = 0; i < 7; i++) {\n\t\tstr += Math.random()\n\t\t\t.toString(36)\n\t\t\t.substring(7)\n\t}\n\treturn str\n}\n\nconst createICalElement = () => {\n\tconst root = new ical.Component(['vcalendar', [], []])\n\n\troot.updatePropertyWithValue('prodid', '-//' + OC.theme.name + ' Mail')\n\n\treturn root\n}\n\nconst splitCalendar = data => {\n\tconst timezones = []\n\tconst allObjects = {}\n\tconst jCal = ical.parse(data)\n\tconst components = new ical.Component(jCal)\n\n\tconst vtimezones = components.getAllSubcomponents('vtimezone')\n\tvtimezones.forEach(vtimezone => timezones.push(vtimezone))\n\n\tconst componentNames = ['vevent', 'vjournal', 'vtodo']\n\tcomponentNames.forEach(componentName => {\n\t\tconst vobjects = components.getAllSubcomponents(componentName)\n\t\tallObjects[componentName] = {}\n\n\t\tvobjects.forEach(vobject => {\n\t\t\tvar uid = vobject.getFirstPropertyValue('uid')\n\t\t\tallObjects[componentName][uid] = allObjects[componentName][uid] || []\n\t\t\tallObjects[componentName][uid].push(vobject)\n\t\t})\n\t})\n\n\tconst split = []\n\tcomponentNames.forEach(componentName => {\n\t\tsplit[componentName] = []\n\t\tfor (let objectsId in allObjects[componentName]) {\n\t\t\tconst objects = allObjects[componentName][objectsId]\n\t\t\tconst component = createICalElement()\n\t\t\ttimezones.forEach(component.addSubcomponent.bind(component))\n\t\t\tfor (let objectId in objects) {\n\t\t\t\tcomponent.addSubcomponent(objects[objectId])\n\t\t\t}\n\t\t\tsplit[componentName].push(component.toString())\n\t\t}\n\t})\n\n\treturn {\n\t\tname: components.getFirstPropertyValue('x-wr-calname'),\n\t\tcolor: components.getFirstPropertyValue('x-apple-calendar-color'),\n\t\tsplit,\n\t}\n}\n\n/**\n * @param {String} url\n * @param {Object} data\n * @returns {Promise}\n */\nexport const importCalendarEvent = url => data => {\n\tLogger.debug('importing events into calendar', {\n\t\turl,\n\t\tdata,\n\t})\n\tconst promises = []\n\n\tconst file = splitCalendar(data)\n\tconst components = ['vevent', 'vjournal', 'vtodo']\n\tcomponents.forEach(componentName => {\n\t\tfor (let componentId in file.split[componentName]) {\n\t\t\tconst component = file.split[componentName][componentId]\n\t\t\tLogger.info('importing event component', {component})\n\t\t\tpromises.push(\n\t\t\t\tPromise.resolve(\n\t\t\t\t\tAxios.put(url + getRandomString() + '.ics', component, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t})\n\n\treturn Promise.all(promises)\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Actions v-if=\"calendars.length\" default-icon=\"icon-add\">\n\t\t<ActionButton\n\t\t\tv-for=\"(calendar, idx) in cals\"\n\t\t\t:key=\"idx\"\n\t\t\t:icon=\"calendar.loading ? 'icon-loading-small' : 'icon-add'\"\n\t\t\t@click=\"onImport(calendar)\"\n\t\t\t>{{ t('mail', 'Import into {calendar}', {calendar: calendar.displayname}) }}</ActionButton\n\t\t>\n\t</Actions>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\n\nexport default {\n\tname: 'CalendarImport',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\thandler: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcals() {\n\t\t\treturn this.calendars.map(original => {\n\t\t\t\tthis.$set(original, 'loading', false)\n\t\t\t\treturn original\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonImport(calendar) {\n\t\t\tcalendar.loading = true\n\n\t\t\tthis.handler(calendar)\n\t\t\t\t.catch(console.error.bind(this))\n\t\t\t\t.then(() => {\n\t\t\t\t\tcalendar.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import { render, staticRenderFns } from \"./CalendarImport.vue?vue&type=template&id=35c9ae69&scoped=true&\"\nimport script from \"./CalendarImport.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarImport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35c9ae69\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.calendars.length)?_c('Actions',{attrs:{\"default-icon\":\"icon-add\"}},_vm._l((_vm.cals),function(calendar,idx){return _c('ActionButton',{key:idx,attrs:{\"icon\":calendar.loading ? 'icon-loading-small' : 'icon-add'},on:{\"click\":function($event){return _vm.onImport(calendar)}}},[_vm._v(_vm._s(_vm.t('mail', 'Import into {calendar}', {calendar: calendar.displayname})))])}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">{{ eventName }}</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">{{ location }}</div>\n\t\t\t<div v-if=\"date\">{{ date }}</div>\n\t\t\t<div v-if=\"time\">{{ time }}</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\n\nimport CalendarImport from './CalendarImport'\nimport {importCalendarEvent, importSingleCalendarEvent} from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: {CalendarImport},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.startDate).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.startDate).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.endDate).format()\n\t\t\t} else {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment('2019-10-22T12:00:00Z')\n\t\t\t\t\t.add(2, 'hours')\n\t\t\t\t\t.format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(this.data.reservationFor.startDate).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'DTEND',\n\t\t\t\tical.Time.fromDateTimeString(this.getEndDateTime(this.data.reservationFor))\n\t\t\t)\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', {ical: cal.toString()})\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tOCP.Toast.success(t('mail', 'Event imported into {calendar}', {calendar: calendar.displayname}))\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tlogger.error('Could not import event', {error})\n\t\t\t\t\tOCP.Toast.error(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n","import { render, staticRenderFns } from \"./EventReservation.vue?vue&type=template&id=b923b46c&scoped=true&\"\nimport script from \"./EventReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./EventReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventReservation.vue?vue&type=style&index=0&id=b923b46c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b923b46c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"event\"},[_c('div',{staticClass:\"event-name\"},[_vm._v(_vm._s(_vm.eventName))]),_vm._v(\" \"),(_vm.location)?_c('div',{staticClass:\"venue\"},[_vm._v(_vm._s(_vm.location))]):_vm._e(),_vm._v(\" \"),(_vm.date)?_c('div',[_vm._v(_vm._s(_vm.date))]):_vm._e(),_vm._v(\" \"),(_vm.time)?_c('div',[_vm._v(_vm._s(_vm.time))]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">{{ data.reservationFor.departureAirport.iataCode }}</div>\n\t\t\t<div class=\"airport\">{{ data.reservationFor.departureAirport.name }}</div>\n\t\t\t<div v-if=\"departureDate\">{{ departureDate }}</div>\n\t\t\t<div v-if=\"departureTime\">{{ departureTime }}</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">{{ t('mail', 'Reservation {id}', {id: reservation}) }}</div>\n\t\t\t<div v-else><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">{{ data.reservationFor.arrivalAirport.iataCode }}</div>\n\t\t\t<div class=\"airport\">{{ data.reservationFor.arrivalAirport.name }}</div>\n\t\t\t<div v-if=\"arrivalDate\">{{ arrivalDate }}</div>\n\t\t\t<div v-if=\"arrivalTime\">{{ arrivalTime }}</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\n\nimport CalendarImport from './CalendarImport'\nimport {importCalendarEvent} from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime['@value']).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime['@value']).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tconst depart = moment(this.data.reservationFor.departureTime['@value']).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\n\t\t\tconst arrive = moment(this.data.reservationFor.arrivalTime['@value']).format()\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', {ical: cal.toString()})\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tOCP.Toast.success(t('mail', 'Event imported into {calendar}', {calendar: calendar.displayname}))\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tlogger.error('Could not import event', {error})\n\t\t\t\t\tOCP.Toast.error(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import { render, staticRenderFns } from \"./FlightReservation.vue?vue&type=template&id=5dfcd8b6&scoped=true&\"\nimport script from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FlightReservation.vue?vue&type=style&index=0&id=5dfcd8b6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dfcd8b6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"iata\"},[_vm._v(_vm._s(_vm.data.reservationFor.departureAirport.iataCode))]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(_vm._s(_vm.data.reservationFor.departureAirport.name))]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(_vm._s(_vm.departureDate))]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(_vm._s(_vm.departureTime))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('AirplaneIcon',{attrs:{\"title\":_vm.t('mail', 'Airplane')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flightNumber))]),_vm._v(\" \"),(_vm.reservation)?_c('div',[_vm._v(_vm._s(_vm.t('mail', 'Reservation {id}', {id: _vm.reservation})))]):_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"iata\"},[_vm._v(_vm._s(_vm.data.reservationFor.arrivalAirport.iataCode))]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(_vm._s(_vm.data.reservationFor.arrivalAirport.name))]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(_vm._s(_vm.arrivalDate))]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(_vm._s(_vm.arrivalTime))]):_vm._e()]),_vm._v(\" \"),_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">{{ data.reservationFor.departureStation.name }}</div>\n\t\t\t<div v-if=\"departureDate\">{{ departureDate }}</div>\n\t\t\t<div v-if=\"departureTime\">{{ departureTime }}</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">{{ data.reservationFor.arrivalStation.name }}</div>\n\t\t\t<div v-if=\"arrivalDate\">{{ arrivalDate }}</div>\n\t\t\t<div v-if=\"arrivalTime\">{{ arrivalTime }}</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport {importCalendarEvent} from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureTime).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) ||\n\t\t\t\t'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tconst depart = moment(this.data.reservationFor.departureTime).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\n\t\t\t\tconst arrive = moment(this.data.reservationFor.arrivalTime).format()\n\t\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', {ical: cal.toString()})\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tOCP.Toast.success(t('mail', 'Event imported into {calendar}', {calendar: calendar.displayname}))\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tlogger.error('Could not import event', {error})\n\t\t\t\t\tOCP.Toast.error(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import { render, staticRenderFns } from \"./TrainReservation.vue?vue&type=template&id=5978d1e8&scoped=true&\"\nimport script from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrainReservation.vue?vue&type=style&index=0&id=5978d1e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5978d1e8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"station\"},[_vm._v(_vm._s(_vm.data.reservationFor.departureStation.name))]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(_vm._s(_vm.departureDate))]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(_vm._s(_vm.departureTime))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('TrainIcon',{attrs:{\"title\":_vm.t('mail', 'Train')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.trainNumber))]),_vm._v(\" \"),_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"station\"},[_vm._v(_vm._s(_vm.data.reservationFor.arrivalStation.name))]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(_vm._s(_vm.arrivalDate))]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(_vm._s(_vm.arrivalTime))]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<EventReservation\n\t\t\t\tv-if=\"entry['@type'] === 'EventReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\"\n\t\t\t/>\n\t\t\t<FlightReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'FlightReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\"\n\t\t\t/>\n\t\t\t<TrainReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'TrainReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\"\n\t\t\t/>\n\t\t\t<span v-else :key=\"idx\">{{\n\t\t\t\tt('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})\n\t\t\t}}</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport once from 'lodash/fp/once'\n\nimport {getUserCalendars} from '../service/DAVService'\nimport logger from '../logger'\nimport EventReservation from './itinerary/EventReservation'\nimport FlightReservation from './itinerary/FlightReservation'\nimport TrainReservation from './itinerary/TrainReservation'\n\nconst getUserCalendarsOnce = once(getUserCalendars)\n\nexport default {\n\tname: 'Itinerary',\n\tcomponents: {\n\t\tEventReservation,\n\t\tFlightReservation,\n\t\tTrainReservation,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t}\n\t},\n\tmounted() {\n\t\tgetUserCalendarsOnce()\n\t\t\t.then(calendars => (this.calendars = calendars))\n\t\t\t.catch(error => logger.error('Could not load calendars', {error}))\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Itinerary.vue?vue&type=template&id=5e4dc2b2&\"\nimport script from \"./Itinerary.vue?vue&type=script&lang=js&\"\nexport * from \"./Itinerary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.entries),function(entry,idx){return [(entry['@type'] === 'EventReservation')?_c('EventReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'FlightReservation')?_c('FlightReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'TrainReservation')?_c('TrainReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):_c('span',{key:idx},[_vm._v(_vm._s(_vm.t('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})))])]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<div v-if=\"hasBlockedContent\" id=\"mail-message-has-blocked-content\">\n\t\t\t{{ t('mail', 'The images have been blocked to protect your privacy.') }}\n\t\t\t<button @click=\"onShowBlockedContent\">\n\t\t\t\t{{ t('mail', 'Show images from this\tsender') }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-if=\"loading\" class=\"icon-loading\" />\n\t\t<div id=\"message-container\" :class=\"{hidden: loading}\">\n\t\t\t<iframe id=\"message-frame\" ref=\"iframe\" :src=\"url\" seamless @load=\"onMessageFrameLoad\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport PrintScout from 'printscout'\nconst scout = new PrintScout()\n\nimport logger from '../logger'\n\nexport default {\n\tname: 'MessageHTMLBody',\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\thasBlockedContent: false,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tscout.on('beforeprint', this.onBeforePrint)\n\t\tscout.on('afterprint', this.onAfterPrint)\n\t},\n\tbeforeDestroy() {\n\t\tscout.off('beforeprint', this.onBeforePrint)\n\t\tscout.off('afterprint', this.onAfterPrint)\n\t},\n\tmethods: {\n\t\tgetIframeDoc() {\n\t\t\tconst iframe = this.$refs.iframe\n\t\t\treturn iframe.contentDocument || iframe.contentWindow.document\n\t\t},\n\t\tonMessageFrameLoad() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tconst iframeBody = iframeDoc.querySelectorAll('body')[0]\n\t\t\tthis.hasBlockedContent =\n\t\t\t\tiframeDoc.querySelectorAll('[data-original-src]').length > 0 ||\n\t\t\t\tiframeDoc.querySelectorAll('[data-original-style]').length > 0\n\n\t\t\tthis.loading = false\n\t\t},\n\t\tonAfterPrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', '')\n\t\t},\n\t\tonBeforePrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', `${this.getIframeDoc().body.scrollHeight}px`, 'important')\n\t\t},\n\t\tonShowBlockedContent() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tlogger.debug('showing external images')\n\t\t\tiframeDoc.querySelectorAll('[data-original-src]').forEach(node => {\n\t\t\t\tnode.style.display = null\n\t\t\t\tnode.setAttribute('src', node.getAttribute('data-original-src'))\n\t\t\t})\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-style]')\n\t\t\t\t.forEach(node => node.setAttribute('style', node.getAttribute('data-original-style')))\n\n\t\t\tthis.hasBlockedContent = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// account for 8px margin on iframe body\n#mail-content {\n\tmargin-left: 30px;\n\tmargin-top: 2px;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 8px;\n}\n\n#message-container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 0;\n\tpadding-bottom: 56.25%;\n}\n\n#message-frame {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageHTMLBody.vue?vue&type=template&id=5473b814&scoped=true&\"\nimport script from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageHTMLBody.vue?vue&type=style&index=0&id=5473b814&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5473b814\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[(_vm.hasBlockedContent)?_c('div',{attrs:{\"id\":\"mail-message-has-blocked-content\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The images have been blocked to protect your privacy.'))+\"\\n\\t\\t\"),_c('button',{on:{\"click\":_vm.onShowBlockedContent}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Show images from this\tsender'))+\"\\n\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"icon-loading\"}):_vm._e(),_vm._v(\" \"),_c('div',{class:{hidden: _vm.loading},attrs:{\"id\":\"message-container\"}},[_c('iframe',{ref:\"iframe\",attrs:{\"id\":\"message-frame\",\"src\":_vm.url,\"seamless\":\"\"},on:{\"load\":_vm.onMessageFrameLoad}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"","<template>\n\t<div>\n\t\t<div id=\"mail-content\" v-html=\"htmlBody\"></div>\n\t\t<div v-if=\"signature\" class=\"mail-signature\" v-html=\"htmlSignature\"></div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'MessagePlainTextBody',\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\thtmlBody() {\n\t\t\treturn this.nl2br(this.body)\n\t\t},\n\t\thtmlSignature() {\n\t\t\treturn this.nl2br(this.signature)\n\t\t},\n\t},\n\tmethods: {\n\t\tnl2br(str) {\n\t\t\treturn str.replace(/(\\r\\n|\\n\\r|\\n|\\r)/g, '<br />')\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.mail-signature {\n\tfont-family: monospace;\n\topacity: 0.5;\n\tline-height: initial;\n}\n</style>\n","import { render, staticRenderFns } from \"./MessagePlainTextBody.vue?vue&type=template&id=375b1446&scoped=true&\"\nimport script from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessagePlainTextBody.vue?vue&type=style&index=0&id=375b1446&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"375b1446\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"mail-content\"},domProps:{\"innerHTML\":_vm._s(_vm.htmlBody)}}),_vm._v(\" \"),(_vm.signature)?_c('div',{staticClass:\"mail-signature\",domProps:{\"innerHTML\":_vm._s(_vm.htmlSignature)}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport {generateUrl} from '@nextcloud/router'\n\nexport function saveAttachmentToFiles(accountId, folderId, messageId, attachmentId, directory) {\n\tconst url = generateUrl(\n\t\t'apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{messageId}/attachment/{attachmentId}',\n\t\t{\n\t\t\taccountId,\n\t\t\tfolderId,\n\t\t\tmessageId,\n\t\t\tattachmentId,\n\t\t}\n\t)\n\n\treturn Axios.post(url, {\n\t\ttargetPath: directory,\n\t})\n}\n\nexport function saveAttachmentsToFiles(accountId, folderId, messageId, directory) {\n\treturn saveAttachmentToFiles(accountId, folderId, messageId, 0, directory)\n}\n\nexport function downloadAttachment(url) {\n\treturn Axios.get(url).then(res => res.data)\n}\n\nexport const uploadLocalAttachment = (file, progress) => {\n\tconst url = generateUrl('/apps/mail/api/attachments')\n\tconst data = new FormData()\n\tconst opts = {\n\t\tonUploadProgress: prog => progress(prog, prog.loaded, prog.total),\n\t}\n\tdata.append('attachment', file)\n\n\treturn Axios.post(url, data, opts)\n\t\t.then(resp => resp.data)\n\t\t.then(({id}) => {\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tid,\n\t\t\t}\n\t\t})\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"attachment\" @click=\"download\">\n\t\t<img v-if=\"isImage\" class=\"mail-attached-image\" :src=\"url\" />\n\t\t<img class=\"attachment-icon\" :src=\"mimeUrl\" />\n\t\t<span class=\"attachment-name\" :title=\"label\"\n\t\t\t>{{ name }}\n\t\t\t<span class=\"attachment-size\">({{ humanReadable(size) }})</span>\n\t\t</span>\n\t\t<button\n\t\t\tv-if=\"isCalendarEvent\"\n\t\t\tclass=\"button attachment-import calendar\"\n\t\t\t:class=\"{'icon-add': !loadingCalendars, 'icon-loading-small': loadingCalendars}\"\n\t\t\t:disabled=\"loadingCalendars\"\n\t\t\t:title=\"t('mail', 'Import into calendar')\"\n\t\t\t@click.stop=\"loadCalendars\"\n\t\t></button>\n\t\t<button class=\"button icon-download attachment-download\" :title=\"t('mail', 'Download attachment')\"></button>\n\t\t<button\n\t\t\tclass=\"attachment-save-to-cloud\"\n\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t:disabled=\"savingToCloud\"\n\t\t\t:title=\"t('mail', 'Save to Files')\"\n\t\t\t@click.stop=\"saveToCloud\"\n\t\t></button>\n\t\t<div\n\t\t\tv-on-click-outside=\"closeCalendarPopover\"\n\t\t\tclass=\"popovermenu bubble attachment-import-popover hidden\"\n\t\t\t:class=\"{open: showCalendarPopover}\"\n\t\t>\n\t\t\t<PopoverMenu :menu=\"calendarMenuEntries\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport {formatFileSize} from '@nextcloud/files'\nimport {mixin as onClickOutside} from 'vue-on-click-outside'\nimport {getFilePickerBuilder} from '@nextcloud/dialogs'\nimport PopoverMenu from '@nextcloud/vue/dist/Components/PopoverMenu'\n\nimport {parseUid} from '../util/EnvelopeUidParser'\nimport Logger from '../logger'\n\nimport {downloadAttachment, saveAttachmentToFiles} from '../service/AttachmentService'\nimport {getUserCalendars, importCalendarEvent} from '../service/DAVService'\n\nexport default {\n\tname: 'MessageAttachment',\n\tcomponents: {\n\t\tPopoverMenu,\n\t},\n\tmixins: [onClickOutside],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmime: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisImage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCalendarEvent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tloadingCalendars: false,\n\t\t\tcalendars: [],\n\t\t\tshowCalendarPopover: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tname() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message')\n\t\t\t}\n\t\t\treturn this.fileName\n\t\t},\n\t\tlabel() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message') + ' (' + formatFileSize(this.size) + ')'\n\t\t\t}\n\t\t\treturn this.fileName + ' (' + formatFileSize(this.size) + ')'\n\t\t},\n\t\tcalendarMenuEntries() {\n\t\t\treturn this.calendars.map(cal => {\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\ttext: cal.displayname,\n\t\t\t\t\taction: this.importCalendar(cal.url),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\thumanReadable(size) {\n\t\t\treturn formatFileSize(size)\n\t\t},\n\t\tsaveToCloud() {\n\t\t\tconst saveAttachment = (accountId, folderId, messageId, attachmentId) => directory => {\n\t\t\t\treturn saveAttachmentToFiles(accountId, folderId, messageId, attachmentId, directory)\n\t\t\t}\n\t\t\tconst {accountId, folderId, id} = parseUid(this.$route.params.messageUid)\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachment in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.build()\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then(dest => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachment(accountId, folderId, id, this.id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch(e => Logger.error('not saved', {error: e}))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownload() {\n\t\t\twindow.open(this.url)\n\t\t\twindow.focus()\n\t\t},\n\t\tloadCalendars() {\n\t\t\tthis.loadingCalendars = true\n\t\t\tgetUserCalendars().then(calendars => {\n\t\t\t\tthis.calendars = calendars\n\t\t\t\tthis.showCalendarPopover = true\n\t\t\t\tthis.loadingCalendars = false\n\t\t\t})\n\t\t},\n\t\tcloseCalendarPopover() {\n\t\t\tthis.showCalendarPopover = false\n\t\t},\n\t\timportCalendar(url) {\n\t\t\treturn () => {\n\t\t\t\tdownloadAttachment(this.url)\n\t\t\t\t\t.then(importCalendarEvent(url))\n\t\t\t\t\t.then(() => Logger.info('calendar imported'))\n\t\t\t\t\t.catch(e => Logger.error('import error', {error: e}))\n\t\t\t\t\t.then(() => (this.showCalendarPopover = false))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.attachment {\n\tposition: relative;\n\tdisplay: inline-block;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: 3px;\n\tmargin: 0 10px 10px 0;\n\tpadding: 5px;\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-dark);\n\tcursor: pointer;\n}\n\n@media only screen and (max-width: 768px) {\n\t.attachment {\n\t\twidth: calc(100% - 5px);\n\t}\n}\n\n@media only screen and (min-width: 769px) and (max-width: 1400px) {\n\t.attachment {\n\t\twidth: calc(50% - 10px);\n\t}\n}\n\n@media only screen and (min-width: 1401px) {\n\t.attachment {\n\t\twidth: calc(33% - 12px);\n\t}\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tmax-height: 120px;\n\tcursor: pointer;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n\n.attachment-save-to-cloud,\n.attachment-download,\n.attachment-import {\n\tposition: absolute;\n\theight: 32px;\n\twidth: 32px;\n\tmargin: 0;\n\tbottom: 0;\n\tbackground-color: transparent;\n\tborder-color: transparent;\n}\n\n.attachment-save-to-cloud {\n\tright: 0;\n}\n\n.attachment-download {\n\tright: 32px;\n\topacity: 0.6;\n}\n\n.attachment-import {\n\tright: 64px;\n}\n\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n\n.attachment-import-popover::after {\n\tright: 32px;\n}\n\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: calc(100% - 108px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"mail-message-attachments\">\n\t\t<div class=\"attachments\">\n\t\t\t<MessageAttachment\n\t\t\t\tv-for=\"attachment in attachments\"\n\t\t\t\t:id=\"attachment.id\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:file-name=\"attachment.fileName\"\n\t\t\t\t:size=\"attachment.size\"\n\t\t\t\t:url=\"attachment.downloadUrl\"\n\t\t\t\t:is-image=\"attachment.isImage\"\n\t\t\t\t:is-calendar-event=\"attachment.isCalendarEvent\"\n\t\t\t\t:mime=\"attachment.mime\"\n\t\t\t\t:mime-url=\"attachment.mimeUrl\"\n\t\t\t/>\n\t\t</div>\n\t\t<p v-if=\"moreThanOne\">\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud\"\n\t\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click=\"saveAll\"\n\t\t\t>\n\t\t\t\t{{ t('mail', 'Save all to Files') }}\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport {getFilePickerBuilder} from '@nextcloud/dialogs'\nimport {parseUid} from '../util/EnvelopeUidParser'\nimport {saveAttachmentsToFiles} from '../service/AttachmentService'\n\nimport MessageAttachment from './MessageAttachment'\nimport Logger from '../logger'\n\nexport default {\n\tname: 'MessageAttachments',\n\tcomponents: {\n\t\tMessageAttachment,\n\t},\n\tprops: {\n\t\tattachments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmoreThanOne() {\n\t\t\treturn this.attachments.length > 1\n\t\t},\n\t},\n\tmethods: {\n\t\tsaveAll() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachments in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.build()\n\n\t\t\tconst saveAttachments = (accountId, folderId, messageId) => directory => {\n\t\t\t\treturn saveAttachmentsToFiles(accountId, folderId, messageId, directory)\n\t\t\t}\n\t\t\tconst {accountId, folderId, id} = parseUid(this.$route.params.messageUid)\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then(dest => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachments(accountId, folderId, id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch(error => Logger.error('not saved', {error}))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t},\n}\n</script>\n\n<style>\n.mail-message-attachments {\n\tmargin-bottom: 20px;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-save-to-cloud {\n\tbackground-position: 9px center;\n\tpadding-left: 32px;\n}\n</style>\n","import { render, staticRenderFns } from \"./MessageAttachment.vue?vue&type=template&id=7f3ec3f9&scoped=true&\"\nimport script from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachment.vue?vue&type=style&index=0&id=7f3ec3f9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f3ec3f9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachment\",on:{\"click\":_vm.download}},[(_vm.isImage)?_c('img',{staticClass:\"mail-attached-image\",attrs:{\"src\":_vm.url}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"attachment-icon\",attrs:{\"src\":_vm.mimeUrl}}),_vm._v(\" \"),_c('span',{staticClass:\"attachment-name\",attrs:{\"title\":_vm.label}},[_vm._v(_vm._s(_vm.name)+\"\\n\\t\\t\"),_c('span',{staticClass:\"attachment-size\"},[_vm._v(\"(\"+_vm._s(_vm.humanReadable(_vm.size))+\")\")])]),_vm._v(\" \"),(_vm.isCalendarEvent)?_c('button',{staticClass:\"button attachment-import calendar\",class:{'icon-add': !_vm.loadingCalendars, 'icon-loading-small': _vm.loadingCalendars},attrs:{\"disabled\":_vm.loadingCalendars,\"title\":_vm.t('mail', 'Import into calendar')},on:{\"click\":function($event){$event.stopPropagation();return _vm.loadCalendars($event)}}}):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button icon-download attachment-download\",attrs:{\"title\":_vm.t('mail', 'Download attachment')}}),_vm._v(\" \"),_c('button',{staticClass:\"attachment-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud,\"title\":_vm.t('mail', 'Save to Files')},on:{\"click\":function($event){$event.stopPropagation();return _vm.saveToCloud($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"on-click-outside\",rawName:\"v-on-click-outside\",value:(_vm.closeCalendarPopover),expression:\"closeCalendarPopover\"}],staticClass:\"popovermenu bubble attachment-import-popover hidden\",class:{open: _vm.showCalendarPopover}},[_c('PopoverMenu',{attrs:{\"menu\":_vm.calendarMenuEntries}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./MessageAttachments.vue?vue&type=template&id=16d3949c&\"\nimport script from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachments.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mail-message-attachments\"},[_c('div',{staticClass:\"attachments\"},_vm._l((_vm.attachments),function(attachment){return _c('MessageAttachment',{key:attachment.id,attrs:{\"id\":attachment.id,\"file-name\":attachment.fileName,\"size\":attachment.size,\"url\":attachment.downloadUrl,\"is-image\":attachment.isImage,\"is-calendar-event\":attachment.isCalendarEvent,\"mime\":attachment.mime,\"mime-url\":attachment.mimeUrl}})}),1),_vm._v(\" \"),(_vm.moreThanOne)?_c('p',[_c('button',{staticClass:\"attachments-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":_vm.saveAll}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save all to Files'))+\"\\n\\t\\t\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContentDetails id=\"mail-message\">\n\t\t<Loading v-if=\"loading\" />\n\t\t<Error\n\t\t\tv-else-if=\"!message\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t>\n\t\t</Error>\n\t\t<template v-else>\n\t\t\t<div id=\"mail-message-header\">\n\t\t\t\t<div id=\"mail-message-header-fields\">\n\t\t\t\t\t<h2 :title=\"message.subject\">{{ message.subject }}</h2>\n\t\t\t\t\t<p class=\"transparency\">\n\t\t\t\t\t\t<AddressList :entries=\"message.from\" />\n\t\t\t\t\t\tto\n\t\t\t\t\t\t<!-- TODO: translate -->\n\t\t\t\t\t\t<AddressList :entries=\"message.to\" />\n\t\t\t\t\t\t<template v-if=\"message.cc.length\">\n\t\t\t\t\t\t\t(cc\n\t\t\t\t\t\t\t<!-- TODO: translate -->\n\t\t\t\t\t\t\t<AddressList :entries=\"message.cc\" /><!--\n\t\t\t\t\t\t\t-->)\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"mail-message-actions\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"\n\t\t\t\t\t\t\thasMultipleRecipients\n\t\t\t\t\t\t\t\t? 'icon-reply-all-white button primary'\n\t\t\t\t\t\t\t\t: 'icon-reply-white button primary'\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"hasMultipleRecipients ? replyAll() : replyMessage()\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'Reply') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Actions id=\"mail-message-actions-menu\" class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t\t\t\t<ActionButton v-if=\"hasMultipleRecipients\" icon=\"icon-reply\" @click=\"replyMessage\">\n\t\t\t\t\t\t\t{{ t('mail', 'Reply to sender only') }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton icon=\"icon-forward\" @click=\"forwardMessage\">\n\t\t\t\t\t\t\t{{ t('mail', 'Forward') }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton icon=\"icon-mail\" @click=\"onToggleSeen\">\n\t\t\t\t\t\t\t{{ envelope.flags.unseen ? t('mail', 'Mark read') : t('mail', 'Mark unread') }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton icon=\"icon-delete\" @click=\"onDelete\">\n\t\t\t\t\t\t\t{{ t('mail', 'Delete') }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t</Actions>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"mail-message-body\">\n\t\t\t\t<div v-if=\"message.itineraries.length > 0\" class=\"message-itinerary\">\n\t\t\t\t\t<Itinerary :entries=\"message.itineraries\" :message-id=\"message.messageId\" />\n\t\t\t\t</div>\n\t\t\t\t<MessageHTMLBody v-if=\"message.hasHtmlBody\" :url=\"htmlUrl\" />\n\t\t\t\t<MessagePlainTextBody v-else :body=\"message.body\" :signature=\"message.signature\" />\n\t\t\t\t<MessageAttachments :attachments=\"message.attachments\" />\n\t\t\t\t<div id=\"reply-composer\"></div>\n\t\t\t</div>\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport {generateUrl} from '@nextcloud/router'\n\nimport AddressList from './AddressList'\nimport {buildRecipients as buildReplyRecipients, buildReplySubject} from '../ReplyBuilder'\nimport Error from './Error'\nimport {getRandomMessageErrorMessage} from '../util/ErrorMessageFactory'\nimport Itinerary from './Itinerary'\nimport MessageHTMLBody from './MessageHTMLBody'\nimport MessagePlainTextBody from './MessagePlainTextBody'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport MessageAttachments from './MessageAttachments'\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tActionButton,\n\t\tActions,\n\t\tAddressList,\n\t\tAppContentDetails,\n\t\tError,\n\t\tItinerary,\n\t\tLoading,\n\t\tMessageAttachments,\n\t\tMessageHTMLBody,\n\t\tMessagePlainTextBody,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tmessage: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\treplyRecipient: {},\n\t\t\treplySubject: '',\n\t\t\tenvelope: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\thtmlUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{id}/html', {\n\t\t\t\taccountId: this.message.accountId,\n\t\t\t\tfolderId: this.message.folderId,\n\t\t\t\tid: this.message.id,\n\t\t\t})\n\t\t},\n\t\treplyTo() {\n\t\t\treturn {\n\t\t\t\taccountId: this.message.accountId,\n\t\t\t\tfolderId: this.message.folderId,\n\t\t\t\tmessageId: this.message.id,\n\t\t\t}\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\treturn this.replyRecipient.to.concat(this.replyRecipient.cc).length > 1\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tthis.fetchMessage()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchMessage()\n\t},\n\tmethods: {\n\t\tfetchMessage() {\n\t\t\tthis.loading = true\n\t\t\tthis.message = undefined\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\t\t\tthis.replyRecipient = {}\n\t\t\tthis.replySubject = ''\n\n\t\t\tconst messageUid = this.$route.params.messageUid\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', messageUid)\n\t\t\t\t.then(message => {\n\t\t\t\t\t// TODO: add timeout so that message isn't flagged when only viewed\n\t\t\t\t\t// for a few seconds\n\t\t\t\t\tif (message.uid !== this.$route.params.messageUid) {\n\t\t\t\t\t\tLogger.debug(\"User navigated away, loaded message won't be shown nor flagged as seen\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.message = message\n\n\t\t\t\t\tif (this.message === undefined) {\n\t\t\t\t\t\tLogger.info('message could not be found', {messageUid})\n\t\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst account = this.$store.getters.getAccount(message.accountId)\n\t\t\t\t\tthis.replyRecipient = buildReplyRecipients(message, {\n\t\t\t\t\t\tlabel: account.name,\n\t\t\t\t\t\temail: account.emailAddress,\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.replySubject = buildReplySubject(message.subject)\n\n\t\t\t\t\tthis.loading = false\n\n\t\t\t\t\tthis.envelope = this.$store.getters.getEnvelope(message.accountId, message.folderId, message.id)\n\t\t\t\t\tif (!this.envelope.flags.unseen) {\n\t\t\t\t\t\t// Already seen -> no change necessary\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.$store.dispatch('toggleEnvelopeSeen', this.envelope)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not load message ', {messageUid, error})\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your message')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\treplyMessage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'reply',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tuid: this.message.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\treplyAll() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'replyAll',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tuid: this.message.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tforwardMessage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tuid: this.message.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', this.envelope)\n\t\t},\n\t\tonDelete(e) {\n\t\t\t// Don't try to navigate to the deleted message\n\t\t\te.preventDefault()\n\n\t\t\tlet envelopes = this.$store.getters.getEnvelopes(this.$route.params.accountId, this.$route.params.folderId)\n\t\t\tconst idx = envelopes.indexOf(this.envelope)\n\n\t\t\tlet next\n\t\t\tif (idx === -1) {\n\t\t\t\tLogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t} else if (idx === 0) {\n\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t} else {\n\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t}\n\n\t\t\tthis.$emit('delete', this.envelope)\n\t\t\tthis.$store.dispatch('deleteMessage', this.envelope)\n\n\t\t\tif (!next) {\n\t\t\t\tLogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected account-folder combination, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.accountId and next.folderId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: next.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n#mail-message {\n\tflex-grow: 1;\n}\n\n.mail-message-body {\n\tmargin-bottom: 100px;\n}\n\n#mail-message-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n}\n\n#mail-message-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 38px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n#mail-content,\n.mail-message-attachments {\n\tmargin: 10px 38px 50px 38px;\n}\n\n.mail-message-attachments {\n\tmargin-top: 10px;\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n#mail-message-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-end;\n\tmargin-left: 10px;\n\tmargin-right: 22px;\n\theight: 44px;\n}\n\n.icon-reply-white,\n.icon-reply-all-white {\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0;\n\tpadding: 9px 18px 10px 32px;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n#mail-message-actions-menu {\n\tmargin-left: 4px;\n}\n\n@media print {\n\t#mail-message-header-fields {\n\t\tposition: relative;\n\t}\n\n\t#header,\n\t#app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t#app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n</style>\n","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=7d99228e&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',{attrs:{\"id\":\"mail-message\"}},[(_vm.loading)?_c('Loading'):(!_vm.message)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error}}):[_c('div',{attrs:{\"id\":\"mail-message-header\"}},[_c('div',{attrs:{\"id\":\"mail-message-header-fields\"}},[_c('h2',{attrs:{\"title\":_vm.message.subject}},[_vm._v(_vm._s(_vm.message.subject))]),_vm._v(\" \"),_c('p',{staticClass:\"transparency\"},[_c('AddressList',{attrs:{\"entries\":_vm.message.from}}),_vm._v(\"\\n\\t\\t\\t\\t\\tto\\n\\t\\t\\t\\t\\t\"),_vm._v(\" \"),_c('AddressList',{attrs:{\"entries\":_vm.message.to}}),_vm._v(\" \"),(_vm.message.cc.length)?[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t(cc\\n\\t\\t\\t\\t\\t\\t\"),_vm._v(\" \"),_c('AddressList',{attrs:{\"entries\":_vm.message.cc}}),_vm._v(\")\\n\\t\\t\\t\\t\\t\")]:_vm._e()],2)]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mail-message-actions\"}},[_c('div',{class:_vm.hasMultipleRecipients\n\t\t\t\t\t\t\t? 'icon-reply-all-white button primary'\n\t\t\t\t\t\t\t: 'icon-reply-white button primary',on:{\"click\":function($event){_vm.hasMultipleRecipients ? _vm.replyAll() : _vm.replyMessage()}}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'Reply')))])]),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"id\":\"mail-message-actions-menu\",\"menu-align\":\"right\"}},[(_vm.hasMultipleRecipients)?_c('ActionButton',{attrs:{\"icon\":\"icon-reply\"},on:{\"click\":_vm.replyMessage}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply to sender only'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-forward\"},on:{\"click\":_vm.forwardMessage}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-mail\"},on:{\"click\":_vm.onToggleSeen}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.envelope.flags.unseen ? _vm.t('mail', 'Mark read') : _vm.t('mail', 'Mark unread'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\"},on:{\"click\":_vm.onDelete}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete'))+\"\\n\\t\\t\\t\\t\\t\")])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"mail-message-body\"},[(_vm.message.itineraries.length > 0)?_c('div',{staticClass:\"message-itinerary\"},[_c('Itinerary',{attrs:{\"entries\":_vm.message.itineraries,\"message-id\":_vm.message.messageId}})],1):_vm._e(),_vm._v(\" \"),(_vm.message.hasHtmlBody)?_c('MessageHTMLBody',{attrs:{\"url\":_vm.htmlUrl}}):_c('MessagePlainTextBody',{attrs:{\"body\":_vm.message.body,\"signature\":_vm.message.signature}}),_vm._v(\" \"),_c('MessageAttachments',{attrs:{\"attachments\":_vm.message.attachments}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"reply-composer\"}})],1)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<ul>\n\t\t\t<li v-for=\"attachment in value\" :key=\"attachment.id\">\n\t\t\t\t<div class=\"new-message-attachment-name\">\n\t\t\t\t\t{{ attachment.displayName }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"new-message-attachments-action svg icon-delete\" @click=\"onDelete(attachment)\"></div>\n\t\t\t</li>\n\t\t\t<li v-if=\"uploading\" class=\"attachments-upload-progress\">\n\t\t\t\t<div :class=\"{'icon-loading-small': uploading}\"></div>\n\t\t\t\t<div>{{ uploading ? t('mail', 'Uploading {percent}% ', {percent: uploadProgress}) : '' }}</div>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<input ref=\"localAttachments\" type=\"file\" multiple style=\"display: none;\" @change=\"onLocalAttachmentSelected\" />\n\t</div>\n</template>\n\n<script>\nimport map from 'lodash/fp/map'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport {translate as t} from '@nextcloud/l10n'\nimport {getFilePickerBuilder} from '@nextcloud/dialogs'\nimport Vue from 'vue'\n\nimport Logger from '../logger'\nimport {uploadLocalAttachment} from '../service/AttachmentService'\n\nexport default {\n\tname: 'ComposerAttachments',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t}\n\t},\n\tcomputed: {\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (let id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('onAddLocalAttachment', this.onAddLocalAttachment)\n\t\tthis.bus.$on('onAddCloudAttachment', this.onAddCloudAttachment)\n\t},\n\tmethods: {\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\tfileNameToAttachment(name, id) {\n\t\t\treturn {\n\t\t\t\tfileName: name,\n\t\t\t\tdisplayName: trimStart('/')(name),\n\t\t\t\tid,\n\t\t\t\tisLocal: id !== undefined,\n\t\t\t}\n\t\t},\n\t\temitNewAttachment(attachment) {\n\t\t\tthis.$emit('input', this.value.concat([attachment]))\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst progress = id => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t}\n\n\t\t\tconst promises = map(file => {\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\n\t\t\t\treturn uploadLocalAttachment(file, progress(file.name)).then(({file, id}) => {\n\t\t\t\t\tLogger.info('uploaded')\n\t\t\t\t\treturn this.emitNewAttachment(this.fileNameToAttachment(file.name, id))\n\t\t\t\t})\n\t\t\t})(e.target.files)\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch(error => Logger.error('could not upload all attachments', {error}))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).build()\n\n\t\t\treturn picker\n\t\t\t\t.pick(t('mail', 'Choose a file to add as attachment'))\n\t\t\t\t.then(path => this.emitNewAttachment(this.fileNameToAttachment(path)))\n\t\t\t\t.catch(error => Logger.error('could not choose a file as attachment', {error}))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit(\n\t\t\t\t'input',\n\t\t\t\tthis.value.filter(a => a !== attachment)\n\t\t\t)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\nbutton {\n\t/* TODO: remove for Nextcloud 15+ */\n\t/* https://github.com/nextcloud/server/pull/12138 */\n\tdisplay: inline-block;\n}\n\n.new-message-attachments li {\n\tpadding: 10px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 22px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n\n.attachments-upload-progress {\n\tdisplay: flex;\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n</style>\n","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=84fc7730&scoped=true&\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=84fc7730&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"84fc7730\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-message-attachments\"},[_c('ul',[_vm._l((_vm.value),function(attachment){return _c('li',{key:attachment.id},[_c('div',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(attachment.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"new-message-attachments-action svg icon-delete\",on:{\"click\":function($event){return _vm.onDelete(attachment)}}})])}),_vm._v(\" \"),(_vm.uploading)?_c('li',{staticClass:\"attachments-upload-progress\"},[_c('div',{class:{'icon-loading-small': _vm.uploading}}),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.uploading ? _vm.t('mail', 'Uploading {percent}% ', {percent: _vm.uploadProgress}) : ''))])]):_vm._e()],2),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"state === STATES.EDITING\" class=\"message-composer\">\n\t\t<div class=\"composer-fields mail-account\">\n\t\t\t<label class=\"from-label\" for=\"from\">\n\t\t\t\t{{ t('mail', 'From') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"from\"\n\t\t\t\tv-model=\"selectedAlias\"\n\t\t\t\t:options=\"aliases\"\n\t\t\t\tlabel=\"name\"\n\t\t\t\ttrack-by=\"id\"\n\t\t\t\t:searchable=\"false\"\n\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t:custom-label=\"formatAliases\"\n\t\t\t\t:placeholder=\"t('mail', 'Select account')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label class=\"to-label\" for=\"to\">\n\t\t\t\t{{ t('mail', 'To') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"to\"\n\t\t\t\tref=\"toLabel\"\n\t\t\t\tv-model=\"selectTo\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', 'Contact or email address ')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewToAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\"\n\t\t\t/>\n\t\t\t<a v-if=\"!showCC\" class=\"copy-toggle\" href=\"#\" @click.prevent=\"showCC = true\">\n\t\t\t\t{{ t('mail', '+ CC/BCC') }}\n\t\t\t</a>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label\">\n\t\t\t\t{{ t('mail', 'CC') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"cc\"\n\t\t\t\tv-model=\"selectCc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', '')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewCcAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\"\n\t\t\t>\n\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t</Multiselect>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label\">\n\t\t\t\t{{ t('mail', 'BCC') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"bcc\"\n\t\t\t\tv-model=\"selectBcc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', '')\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewBccAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\"\n\t\t\t>\n\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t</Multiselect>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label hidden-visually\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject ')\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-box\">\n\t\t\t{{ t('mail', 'This message came from a noreply address so your reply will probably not be read.') }}\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<!--@keypress=\"onBodyKeyPress\"-->\n\t\t\t<TextEditor\n\t\t\t\tv-if=\"editorPlainText\"\n\t\t\t\tkey=\"editor-plain\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message ')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t@input=\"onInputChanged\"\n\t\t\t></TextEditor>\n\t\t\t<TextEditor\n\t\t\t\tv-else\n\t\t\t\tkey=\"editor-rich\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:html=\"true\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message ')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t@input=\"onInputChanged\"\n\t\t\t></TextEditor>\n\t\t</div>\n\t\t<div class=\"composer-actions\">\n\t\t\t<ComposerAttachments v-model=\"attachments\" :bus=\"bus\" @upload=\"onAttachmentsUploading\" />\n\t\t\t<div class=\"composer-actions-right\">\n\t\t\t\t<p class=\"composer-actions-draft\">\n\t\t\t\t\t<span v-if=\"savingDraft === true\" id=\"draft-status\">{{ t('mail', 'Saving draft ') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === false\" id=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t\t\t\t</p>\n\t\t\t\t<Actions>\n\t\t\t\t\t<ActionButton icon=\"icon-upload\" @click=\"onAddLocalAttachment\">{{\n\t\t\t\t\t\tt('mail', 'Upload attachment')\n\t\t\t\t\t}}</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-folder\" @click=\"onAddCloudAttachment\">{{\n\t\t\t\t\t\tt('mail', 'Add attachment from Files')\n\t\t\t\t\t}}</ActionButton>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t:checked=\"!editorPlainText\"\n\t\t\t\t\t\t:text=\"t('mail', 'Enable formatting')\"\n\t\t\t\t\t\t@check=\"editorPlainText = false\"\n\t\t\t\t\t\t@uncheck=\"editorPlainText = true\"\n\t\t\t\t\t\t>{{ t('mail', 'Enable formatting') }}</ActionCheckbox\n\t\t\t\t\t>\n\t\t\t\t</Actions>\n\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"submit-message send primary icon-confirm-white\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:value=\"submitButtonTitle\"\n\t\t\t\t\t\t:disabled=\"!canSend\"\n\t\t\t\t\t\t@click=\"onSend\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Loading v-else-if=\"state === STATES.UPLOADING\" :hint=\"t('mail', 'Uploading attachments ')\" />\n\t<Loading v-else-if=\"state === STATES.SENDING\" :hint=\"t('mail', 'Sending ')\" />\n\t<div v-else-if=\"state === STATES.ERROR\" class=\"emptycontent\">\n\t\t<h2>{{ t('mail', 'Error sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">{{ errorText }}</p>\n\t\t<button class=\"button\" @click=\"state = STATES.EDITING\">{{ t('mail', 'Go back') }}</button>\n\t\t<button class=\"button primary\" @click=\"onSend\">{{ t('mail', 'Retry') }}</button>\n\t</div>\n\t<div v-else class=\"emptycontent\">\n\t\t<h2 v-if=\"!isReply\">{{ t('mail', 'Message sent!') }}</h2>\n\t\t<h2 v-else>{{ t('mail', 'Reply sent!') }}</h2>\n\t\t<button v-if=\"!isReply\" class=\"button primary\" @click=\"reset\">\n\t\t\t{{ t('mail', 'Write another message') }}\n\t\t</button>\n\t</div>\n</template>\n\n<script>\nimport debounce from 'lodash/fp/debounce'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionCheckbox from '@nextcloud/vue/dist/Components/ActionCheckbox'\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\nimport {translate as t} from '@nextcloud/l10n'\nimport Vue from 'vue'\n\nimport ComposerAttachments from './ComposerAttachments'\nimport {findRecipient} from '../service/AutocompleteService'\nimport {htmlToText, textToSimpleHtml} from '../util/HtmlHelper'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport TextEditor from './TextEditor'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nVue.use(Autosize)\n\nconst STATES = Object.seal({\n\tEDITING: 0,\n\tUPLOADING: 1,\n\tSENDING: 2,\n\tERROR: 3,\n\tFINISHED: 4,\n})\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tComposerAttachments,\n\t\tLoading,\n\t\tMultiselect,\n\t\tTextEditor,\n\t},\n\tprops: {\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdraft: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tsend: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tisPlainText: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tselectedAlias: -1, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal: this.isPlainText ? textToSimpleHtml(this.body) : this.body,\n\t\t\tattachments: [],\n\t\t\tnoReply: this.to.some(to => to.email.startsWith('noreply@') || to.email.startsWith('no-reply@')),\n\t\t\tsubmitButtonTitle: t('mail', 'Send'),\n\t\t\tdraftsPromise: Promise.resolve(),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tsavingDraft: undefined,\n\t\t\tsaveDraftDebounced: debounce(700)(this.saveDraft),\n\t\t\tstate: STATES.EDITING,\n\t\t\terrorText: undefined,\n\t\t\tSTATES,\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t\teditorPlainText: this.isPlainText,\n\t\t\tbus: new Vue(),\n\t\t}\n\t},\n\tcomputed: {\n\t\taliases() {\n\t\t\treturn this.$store.getters.accounts.filter(a => !a.isUnified)\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn this.newRecipients.concat(this.autocompleteRecipients)\n\t\t},\n\t\tisReply() {\n\t\t\treturn this.to.length > 0\n\t\t},\n\t\tnoSubject() {\n\t\t\treturn this.subjectVal === '' && this.bodyVal !== ''\n\t\t},\n\t\tcanSend() {\n\t\t\treturn this.selectTo.length > 0 || this.selectCc.length > 0 || this.selectBcc.length > 0\n\t\t},\n\t},\n\twatch: {\n\t\tselectedAlias(val) {\n\t\t\tif (val) {\n\t\t\t\t// TODO: warn user before formatting is lost?\n\t\t\t\tthis.editorPlainText = val.editorMode === 'plaintext'\n\t\t\t}\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tif (this.fromAccount) {\n\t\t\tthis.selectedAlias = this.aliases.find(alias => alias.id === this.fromAccount)\n\t\t} else {\n\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t}\n\n\t\tthis.bodyVal = this.bodyWithSignature(this.selectedAlias, this.bodyVal)\n\t},\n\tmounted() {\n\t\tthis.$refs.toLabel.$el.focus()\n\t},\n\tmethods: {\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tgetMessageData() {\n\t\t\treturn uid => {\n\t\t\t\treturn {\n\t\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\t\tto: this.selectTo.map(this.recipientToRfc822).join(', '),\n\t\t\t\t\tcc: this.selectCc.map(this.recipientToRfc822).join(', '),\n\t\t\t\t\tbcc: this.selectBcc.map(this.recipientToRfc822).join(', '),\n\t\t\t\t\tdraftUID: uid,\n\t\t\t\t\tsubject: this.subjectVal,\n\t\t\t\t\tbody: this.editorPlainText ? htmlToText(this.bodyVal) : this.bodyVal,\n\t\t\t\t\tattachments: this.attachments,\n\t\t\t\t\tfolderId: this.replyTo ? this.replyTo.folderId : undefined,\n\t\t\t\t\tmessageId: this.replyTo ? this.replyTo.messageId : undefined,\n\t\t\t\t\tisHtml: !this.editorPlainText,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tthis.savingDraft = true\n\t\t\tthis.draftsPromise = this.draftsPromise\n\t\t\t\t.then(uid => this.draft(data(uid)))\n\t\t\t\t.catch(logger.error.bind(logger))\n\t\t\t\t.then(uid => {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t},\n\t\tonInputChanged() {\n\t\t\tthis.saveDraftDebounced(this.getMessageData())\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.bus.$emit('onAddLocalAttachment')\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tthis.bus.$emit('onAddCloudAttachment')\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then(results => {\n\t\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(results))\n\t\t\t})\n\t\t},\n\t\tonAttachmentsUploading(uploaded) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(() => uploaded)\n\t\t\t\t.catch(error => logger.error('could not upload attachments', {error}))\n\t\t\t\t.then(() => logger.debug('attachments uploaded'))\n\t\t},\n\t\tonBodyKeyPress(event) {\n\t\t\t// CTRL+Enter sends the message\n\t\t\tif (event.keyCode === 13 && event.ctrlKey) {\n\t\t\t\treturn this.onSend()\n\t\t\t}\n\t\t},\n\t\tonNewToAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectTo)\n\t\t},\n\t\tonNewCcAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectCc)\n\t\t},\n\t\tonNewBccAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectBcc)\n\t\t},\n\t\tonNewAddr(addr, list) {\n\t\t\tconst res = {\n\t\t\t\tlabel: addr, // TODO: parse if possible\n\t\t\t\temail: addr, // TODO: parse if possible\n\t\t\t}\n\t\t\tthis.newRecipients.push(res)\n\t\t\tlist.push(res)\n\t\t},\n\t\tonSend() {\n\t\t\tthis.state = STATES.UPLOADING\n\n\t\t\treturn this.attachmentsPromise\n\t\t\t\t.then(() => (this.state = STATES.SENDING))\n\t\t\t\t.then(() => this.draftsPromise)\n\t\t\t\t.then(this.getMessageData())\n\t\t\t\t.then(data => this.send(data))\n\t\t\t\t.then(() => logger.info('message sent'))\n\t\t\t\t.then(() => (this.state = STATES.FINISHED))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tlogger.error('could not send message', {error})\n\t\t\t\t\tif (error && error.toString) {\n\t\t\t\t\t\tthis.errorText = error.toString()\n\t\t\t\t\t}\n\t\t\t\t\tthis.state = STATES.ERROR\n\t\t\t\t})\n\t\t},\n\t\treset() {\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = ''\n\t\t\tthis.attachments = []\n\t\t\tthis.errorText = undefined\n\t\t\tthis.state = STATES.EDITING\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t * @returns {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\tif (!alias.name) {\n\t\t\t\treturn alias.emailAddress\n\t\t\t}\n\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t\tbodyWithSignature(alias, body) {\n\t\t\tif (!alias || !alias.signature) {\n\t\t\t\treturn body\n\t\t\t}\n\n\t\t\treturn `${body} <br>--<br> ${textToSimpleHtml(alias.signature)}`\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n}\n\n.composer-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-end;\n\tjustify-content: space-between;\n\tposition: sticky;\n\tbottom: 0;\n\tpadding: 12px;\n\tbackground: linear-gradient(transparent, var(--color-main-background-translucent) 50%);\n}\n\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.composer-fields {\n\tdisplay: flex;\n\talign-items: center;\n\tborder-top: 1px solid var(--color-border);\n\n\t&.mail-account {\n\t\tborder-top: none;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n}\n\n.subject {\n\tfont-size: 20px;\n\tfont-weight: bold;\n\tmargin: 0;\n\tpadding: 24px 12px;\n}\n\n.noreply-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n.message-body {\n\tmin-height: 300px;\n\twidth: 100%;\n\tmargin: 0;\n\tpadding: 12px;\n\tpadding-top: 0;\n\tborder: none !important;\n\toutline: none !important;\n\tbox-shadow: none !important;\n}\n\n#draft-status {\n\tpadding: 5px;\n\topacity: 0.5;\n\tfont-size: small;\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding: 12px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n.send {\n\tpadding: 12px 18px 13px 36px;\n\tbackground-position: 12px center;\n\tmargin-left: 4px;\n}\n</style>\n\n<style>\n.multiselect .multiselect__tags {\n\tborder: none !important;\n}\n</style>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport {generateUrl} from '@nextcloud/router'\n\nexport const findRecipient = term => {\n\tconst url = generateUrl('/apps/mail/api/autoComplete?term={term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then(resp => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=5d616abc&scoped=true&\"\nimport script from \"./Composer.vue?vue&type=script&lang=js&\"\nexport * from \"./Composer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=5d616abc&lang=scss&scoped=true&\"\nimport style1 from \"./Composer.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d616abc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.state === _vm.STATES.EDITING)?_c('div',{staticClass:\"message-composer\"},[_c('div',{staticClass:\"composer-fields mail-account\"},[_c('label',{staticClass:\"from-label\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'From'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"from\",\"options\":_vm.aliases,\"label\":\"name\",\"track-by\":\"id\",\"searchable\":false,\"hide-selected\":true,\"custom-label\":_vm.formatAliases,\"placeholder\":_vm.t('mail', 'Select account'),\"clear-on-select\":false},on:{\"keyup\":_vm.onInputChanged},model:{value:(_vm.selectedAlias),callback:function ($$v) {_vm.selectedAlias=$$v},expression:\"selectedAlias\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"to-label\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'To'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{ref:\"toLabel\",attrs:{\"id\":\"to\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address '),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewToAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectTo),callback:function ($$v) {_vm.selectTo=$$v},expression:\"selectTo\"}}),_vm._v(\" \"),(!_vm.showCC)?_c('a',{staticClass:\"copy-toggle\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.showCC = true}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', '+ CC/BCC'))+\"\\n\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'CC'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"cc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', ''),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewCcAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectCc),callback:function ($$v) {_vm.selectCc=$$v},expression:\"selectCc\"}},[_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1):_vm._e(),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'BCC'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"bcc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', ''),\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewBccAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectBcc),callback:function ($$v) {_vm.selectBcc=$$v},expression:\"selectBcc\"}},[_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label hidden-visually\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject ')},domProps:{\"value\":(_vm.subjectVal)},on:{\"keyup\":_vm.onInputChanged,\"input\":function($event){if($event.target.composing){ return; }_vm.subjectVal=$event.target.value}}})]),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-box\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This message came from a noreply address so your reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[(_vm.editorPlainText)?_c('TextEditor',{key:\"editor-plain\",staticClass:\"message-body\",attrs:{\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message '),\"focus\":_vm.isReply},on:{\"input\":_vm.onInputChanged},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):_c('TextEditor',{key:\"editor-rich\",staticClass:\"message-body\",attrs:{\"html\":true,\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message '),\"focus\":_vm.isReply},on:{\"input\":_vm.onInputChanged},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions\"},[_c('ComposerAttachments',{attrs:{\"bus\":_vm.bus},on:{\"upload\":_vm.onAttachmentsUploading},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions-right\"},[_c('p',{staticClass:\"composer-actions-draft\"},[(_vm.savingDraft === true)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft ')))]):(_vm.savingDraft === false)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()]),_vm._v(\" \"),_c('Actions',[_c('ActionButton',{attrs:{\"icon\":\"icon-upload\"},on:{\"click\":_vm.onAddLocalAttachment}},[_vm._v(_vm._s(_vm.t('mail', 'Upload attachment')))]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-folder\"},on:{\"click\":_vm.onAddCloudAttachment}},[_vm._v(_vm._s(_vm.t('mail', 'Add attachment from Files')))]),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":!_vm.editorPlainText,\"text\":_vm.t('mail', 'Enable formatting')},on:{\"check\":function($event){_vm.editorPlainText = false},\"uncheck\":function($event){_vm.editorPlainText = true}}},[_vm._v(_vm._s(_vm.t('mail', 'Enable formatting')))])],1),_vm._v(\" \"),_c('div',[_c('input',{staticClass:\"submit-message send primary icon-confirm-white\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.canSend},domProps:{\"value\":_vm.submitButtonTitle},on:{\"click\":_vm.onSend}})])],1)],1)]):(_vm.state === _vm.STATES.UPLOADING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Uploading attachments ')}}):(_vm.state === _vm.STATES.SENDING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Sending ')}}):(_vm.state === _vm.STATES.ERROR)?_c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Error sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(_vm._s(_vm.errorText))]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(_vm._s(_vm.t('mail', 'Go back')))]),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.onSend}},[_vm._v(_vm._s(_vm.t('mail', 'Retry')))])]):_c('div',{staticClass:\"emptycontent\"},[(!_vm.isReply)?_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message sent!')))]):_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Reply sent!')))]),_vm._v(\" \"),(!_vm.isReply)?_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.reset}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Write another message'))+\"\\n\\t\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContentDetails>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Error\n\t\t\tv-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t>\n\t\t</Error>\n\t\t<Composer\n\t\t\tv-else\n\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t:to=\"composerData.to\"\n\t\t\t:cc=\"composerData.cc\"\n\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t:subject=\"composerData.subject\"\n\t\t\t:body=\"composerData.body\"\n\t\t\t:draft=\"saveDraft\"\n\t\t\t:send=\"sendMessage\"\n\t\t\t:is-plain-text=\"composerData.isPlainText\"\n\t\t/>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport Axios from '@nextcloud/axios'\nimport {generateUrl} from '@nextcloud/router'\n\nimport {\n\tbuildForwardSubject,\n\tbuildHtmlReplyBody,\n\tbuildReplyBody,\n\tbuildReplySubject,\n\tbuildRecipients as buildReplyRecipients,\n} from '../ReplyBuilder'\nimport Composer from './Composer'\nimport {getRandomMessageErrorMessage} from '../util/ErrorMessageFactory'\nimport Error from './Error'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport {saveDraft, sendMessage} from '../service/MessageService'\n\nexport default {\n\tname: 'NewMessageDetail',\n\tcomponents: {\n\t\tAppContentDetails,\n\t\tComposer,\n\t\tError,\n\t\tLoading,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tdraft: undefined,\n\t\t\toriginal: undefined,\n\t\t\toriginalBody: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcomposerData() {\n\t\t\tif (this.draft !== undefined) {\n\t\t\t\tLogger.info('todo: handle draft data', {draft: this.draft})\n\t\t\t\treturn {\n\t\t\t\t\tto: this.draft.to,\n\t\t\t\t\tcc: this.draft.cc,\n\t\t\t\t\tbcc: this.draft.bcc, // TODO: impl in composer\n\t\t\t\t\tsubject: this.draft.subject,\n\t\t\t\t\tbody: this.draft.body,\n\t\t\t\t\tisPlainText: !this.draft.hasHtmlBody,\n\t\t\t\t}\n\t\t\t} else if (this.$route.query.uid !== undefined) {\n\t\t\t\t// Forward or reply to a message\n\t\t\t\tconst message = this.original\n\t\t\t\tLogger.debug('forwarding or replying to message', {message})\n\n\t\t\t\tlet subject = ''\n\t\t\t\tlet replyRecipients = {}\n\t\t\t\tif (this.$route.params.messageUid === 'reply') {\n\t\t\t\t\tLogger.debug('simple reply')\n\t\t\t\t\tsubject = buildReplySubject(message.subject)\n\t\t\t\t\treplyRecipients.to = message.from\n\t\t\t\t} else if (this.$route.params.messageUid === 'replyAll') {\n\t\t\t\t\tLogger.debug('replying to all')\n\t\t\t\t\tLogger.debug('replying to all: original', {original: this.original})\n\t\t\t\t\tsubject = buildReplySubject(message.subject)\n\t\t\t\t\tconst account = this.$store.getters.getAccount(message.accountId)\n\t\t\t\t\treplyRecipients = buildReplyRecipients(message, {\n\t\t\t\t\t\temail: account.emailAddress,\n\t\t\t\t\t\tlabel: account.name,\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// forward\n\t\t\t\t\tsubject = buildForwardSubject(message.subject)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\tto: replyRecipients.to,\n\t\t\t\t\tcc: replyRecipients.cc,\n\t\t\t\t\tsubject: subject,\n\t\t\t\t\tbody: this.getForwardReplyBody(),\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// New or mailto: message\n\n\t\t\t\tlet accountId\n\t\t\t\t// Only preselect an account when we're not in a unified mailbox\n\t\t\t\tif (this.$route.params.accountId !== 0 && this.$route.params.accountId !== '0') {\n\t\t\t\t\taccountId = parseInt(this.$route.params.accountId, 10)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\taccountId,\n\t\t\t\t\tto: this.stringToRecipients(this.$route.query.to),\n\t\t\t\t\tcc: this.stringToRecipients(this.$route.query.cc),\n\t\t\t\t\tsubject: this.$route.query.subject || '',\n\t\t\t\t\tbody: this.$route.query.body || '',\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\t// `saveDraft` replaced the current URL with the updated draft UID\n\t\t\t// in that case we don't really start a new draft but just keep the\n\t\t\t// URL consistent, hence not loading anything\n\t\t\tif (this.draft && to.name === 'message' && to.params.draftUid === this.draft.uid) {\n\t\t\t\tLogger.debug('detected navigation to current (new) draft UID, not reloading')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.fetchMessage()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchMessage()\n\t},\n\tmethods: {\n\t\tstringToRecipients(str) {\n\t\t\tif (str === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: str,\n\t\t\t\t\temail: str,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t\tfetchMessage() {\n\t\t\tif (this.$route.params.draftUid !== undefined) {\n\t\t\t\treturn this.fetchDraftMessage(this.$route.params.draftUid)\n\t\t\t} else if (this.$route.query.uid !== undefined) {\n\t\t\t\treturn this.fetchOriginalMessage(this.$route.query.uid)\n\t\t\t}\n\t\t},\n\t\tfetchDraftMessage(draftUid) {\n\t\t\tthis.loading = true\n\t\t\tthis.draft = undefined\n\t\t\tthis.error = undefined\n\t\t\tthis.errorMessage = ''\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', draftUid)\n\t\t\t\t.then(draft => {\n\t\t\t\t\tif (draft.uid !== this.$route.params.draftUid) {\n\t\t\t\t\t\tLogger.debug(\"User navigated away, loaded draft won't be shown\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.draft = draft\n\n\t\t\t\t\tif (this.draft === undefined) {\n\t\t\t\t\t\tLogger.info('draft could not be found', {draftUid})\n\t\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not load draft ' + draftUid, {error})\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your draft')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tfetchOriginalMessage(uid) {\n\t\t\tthis.loading = true\n\t\t\tthis.error = undefined\n\t\t\tthis.errorMessage = ''\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', uid)\n\t\t\t\t.then(message => {\n\t\t\t\t\tif (message.uid !== this.$route.query.uid) {\n\t\t\t\t\t\tLogger.debug(\"User navigated away, loaded original message won't be used\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tLogger.debug('original message fetched', {message})\n\t\t\t\t\tthis.original = message\n\n\t\t\t\t\tif (message.hasHtmlBody) {\n\t\t\t\t\t\tLogger.debug('original message has HTML body')\n\t\t\t\t\t\treturn Axios.get(\n\t\t\t\t\t\t\tgenerateUrl('/apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{id}/html', {\n\t\t\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\t\t\tfolderId: message.folderId,\n\t\t\t\t\t\t\t\tid: message.id,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t).then(resp => resp.data)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn message.body\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(body => {\n\t\t\t\t\tthis.originalBody = body\n\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not load original message ' + uid, {error})\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load original message')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tgetForwardReplyBody() {\n\t\t\tif (this.original.hasHtmlBody) {\n\t\t\t\treturn buildHtmlReplyBody(this.originalBody, this.original.from[0], this.original.dateInt)\n\t\t\t}\n\t\t\treturn buildReplyBody(this.originalBody, this.original.from[0], this.original.dateInt)\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tif (data.draftUID === undefined && this.draft) {\n\t\t\t\tLogger.debug('draft data does not have a draftUID, adding one')\n\t\t\t\tdata.draftUID = this.draft.id\n\t\t\t}\n\t\t\treturn saveDraft(data.account, data).then(({uid}) => {\n\t\t\t\tif (this.draft === undefined) {\n\t\t\t\t\treturn uid\n\t\t\t\t}\n\n\t\t\t\tLogger.info('replacing draft ' + this.draft.uid + ' with ' + uid)\n\t\t\t\tconst update = {\n\t\t\t\t\tdraft: this.draft,\n\t\t\t\t\tuid,\n\t\t\t\t\tdata,\n\t\t\t\t}\n\t\t\t\treturn this.$store\n\t\t\t\t\t.dispatch('replaceDraft', update)\n\t\t\t\t\t.then(() =>\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t\t\t\t\tdraftUid: this.draft.uid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t\t.then(() => uid)\n\t\t\t})\n\t\t},\n\t\tsendMessage(data) {\n\t\t\treturn sendMessage(data.account, data)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NewMessageDetail.vue?vue&type=template&id=161d8af8&\"\nimport script from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[(_vm.loading)?_c('Loading'):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error}}):_c('Composer',{attrs:{\"from-account\":_vm.composerData.accountId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"body\":_vm.composerData.body,\"draft\":_vm.saveDraft,\"send\":_vm.sendMessage,\"is-plain-text\":_vm.composerData.isPlainText}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppContentDetails>\n\t\t<div class=\"icon icon-mail\"></div>\n\t\t<h2>{{ t('mail', 'No message selected') }}</h2>\n\t\t<p></p>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t},\n}\n</script>\n\n<style scoped>\n.app-content-details {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n\n.icon {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\n\nh2,\np {\n\ttext-align: center;\n}\n</style>\n","import { render, staticRenderFns } from \"./NoMessageSelected.vue?vue&type=template&id=ef526768&scoped=true&\"\nimport script from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nexport * from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoMessageSelected.vue?vue&type=style&index=0&id=ef526768&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ef526768\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[_c('div',{staticClass:\"icon icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No message selected')))]),_vm._v(\" \"),_c('p')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FolderContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FolderContent.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContent>\n\t\t<AppDetailsToggle v-if=\"showMessage\" @close=\"hideMessage\" />\n\t\t<div id=\"app-content-wrapper\">\n\t\t\t<Loading v-if=\"loading\" :hint=\"t('mail', 'Loading messages')\" />\n\t\t\t<template v-else>\n\t\t\t\t<EnvelopeList\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:folder=\"folder\"\n\t\t\t\t\t:envelopes=\"envelopes\"\n\t\t\t\t\t:search-query=\"searchQuery\"\n\t\t\t\t\t:show=\"!showMessage\"\n\t\t\t\t/>\n\t\t\t\t<NewMessageDetail v-if=\"newMessage\" />\n\t\t\t\t<Message v-else-if=\"showMessage\" />\n\t\t\t\t<NoMessageSelected v-else-if=\"hasMessages && !isMobile\" />\n\t\t\t</template>\n\t\t</div>\n\t</AppContent>\n</template>\n\n<script>\nimport AppContent from '@nextcloud/vue/dist/Components/AppContent'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\n\nimport AppDetailsToggle from './AppDetailsToggle'\nimport EnvelopeList from './EnvelopeList'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport Message from './Message'\nimport NewMessageDetail from './NewMessageDetail'\nimport NoMessageSelected from './NoMessageSelected'\n\nexport default {\n\tname: 'FolderContent',\n\tcomponents: {\n\t\tAppContent,\n\t\tAppDetailsToggle,\n\t\tEnvelopeList,\n\t\tLoading,\n\t\tMessage,\n\t\tNewMessageDetail,\n\t\tNoMessageSelected,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tsearchQuery: undefined,\n\t\t\talive: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasMessages() {\n\t\t\t// it actually should be `return this.$store.getters.getEnvelopes(this.account.id, this.folder.id).length > 0`\n\t\t\t// but for some reason Vue doesn't track the dependencies on reactive data then and messages in subfolders can't\n\t\t\t// be opened then\n\n\t\t\treturn this.folder.envelopes.map(msgId => this.$store.state.envelopes[msgId])\n\t\t},\n\t\tshowMessage() {\n\t\t\treturn this.hasMessages && this.$route.name === 'message'\n\t\t},\n\t\tnewMessage() {\n\t\t\treturn (\n\t\t\t\tthis.$route.params.messageUid === 'new' ||\n\t\t\t\tthis.$route.params.messageUid === 'reply' ||\n\t\t\t\tthis.$route.params.messageUid === 'replyAll'\n\t\t\t)\n\t\t},\n\t\tenvelopes() {\n\t\t\tif (this.searchQuery === undefined) {\n\t\t\t\treturn this.$store.getters.getEnvelopes(this.account.id, this.folder.id)\n\t\t\t} else {\n\t\t\t\treturn this.$store.getters.getSearchEnvelopes(this.account.id, this.folder.id)\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif (to.name === 'folder') {\n\t\t\t\t// Navigate (back) to the folder view -> (re)fetch data\n\t\t\t\tthis.fetchData()\n\t\t\t}\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.alive = true\n\n\t\tnew OCA.Search(this.searchProxy, this.clearSearchProxy)\n\n\t\tthis.fetchData()\n\t},\n\tbeforeDestroy() {\n\t\tthis.alive = false\n\t},\n\tmethods: {\n\t\tfetchData() {\n\t\t\tthis.loading = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchEnvelopes', {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tconst envelopes = this.envelopes\n\t\t\t\t\tLogger.debug('envelopes fetched', envelopes)\n\n\t\t\t\t\tthis.loading = false\n\n\t\t\t\t\tif (!this.isMobile && this.$route.name !== 'message' && envelopes.length > 0) {\n\t\t\t\t\t\t// Show first message\n\t\t\t\t\t\tlet first = envelopes[0]\n\n\t\t\t\t\t\t// Keep the selected account-folder combination, but navigate to the message\n\t\t\t\t\t\t// (it's not a bug that we don't use first.accountId and first.folderId here)\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t\t\t\t\tmessageUid: first.uid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'folder',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tsearchProxy(query) {\n\t\t\tif (this.alive) {\n\t\t\t\tthis.search(query)\n\t\t\t}\n\t\t},\n\t\tclearSearchProxy() {\n\t\t\tif (this.alive) {\n\t\t\t\tthis.clearSearch()\n\t\t\t}\n\t\t},\n\t\tsearch(query) {\n\t\t\tthis.searchQuery = query\n\n\t\t\tthis.fetchData()\n\t\t},\n\t\tclearSearch() {\n\t\t\tthis.searchQuery = undefined\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./FolderContent.vue?vue&type=template&id=142b27fc&\"\nimport script from \"./FolderContent.vue?vue&type=script&lang=js&\"\nexport * from \"./FolderContent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContent',[(_vm.showMessage)?_c('AppDetailsToggle',{on:{\"close\":_vm.hideMessage}}):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"app-content-wrapper\"}},[(_vm.loading)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages')}}):[_c('EnvelopeList',{attrs:{\"account\":_vm.account,\"folder\":_vm.folder,\"envelopes\":_vm.envelopes,\"search-query\":_vm.searchQuery,\"show\":!_vm.showMessage}}),_vm._v(\" \"),(_vm.newMessage)?_c('NewMessageDetail'):(_vm.showMessage)?_c('Message'):(_vm.hasMessages && !_vm.isMobile)?_c('NoMessageSelected'):_vm._e()]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","<template>\n\t<Content v-shortkey.once=\"['c']\" app-name=\"mail\" @shortkey.native=\"onNewMessage\">\n\t\t<Navigation />\n\t\t<FolderContent v-if=\"activeAccount\" :account=\"activeAccount\" :folder=\"activeFolder\" />\n\t</Content>\n</template>\n\n<script>\nimport Content from '@nextcloud/vue/dist/Components/Content'\n\nimport FolderContent from '../components/FolderContent'\nimport logger from '../logger'\nimport Navigation from '../components/Navigation'\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tContent,\n\t\tFolderContent,\n\t\tNavigation,\n\t},\n\tcomputed: {\n\t\tactiveAccount() {\n\t\t\treturn this.$store.getters.getAccount(this.$route.params.accountId)\n\t\t},\n\t\tactiveFolder() {\n\t\t\treturn this.$store.getters.getFolder(this.$route.params.accountId, this.$route.params.folderId)\n\t\t},\n\t\tmenu() {\n\t\t\treturn this.buildMenu()\n\t\t},\n\t},\n\tcreated() {\n\t\tconst accounts = this.$store.getters.accounts\n\n\t\tif (this.$route.name === 'home' && accounts.length > 1) {\n\t\t\t// Show first account\n\t\t\tlet firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one folder\n\t\t\tlet firstFolder = this.$store.getters.getFolders(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading first folder of first account', firstAccount.id, firstFolder.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'folder',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: firstAccount.id,\n\t\t\t\t\tfolderId: firstFolder.id,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length === 1) {\n\t\t\tlogger.debug('the only account we have is the unified one -> show the setup page')\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'setup',\n\t\t\t})\n\t\t} else if (this.$route.name === 'mailto') {\n\t\t\tif (accounts.length === 0) {\n\t\t\t\tconsole.error('cannot handle mailto:, no accounts configured')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Show first account\n\t\t\tlet firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one folder\n\t\t\tlet firstFolder = this.$store.getters.getFolders(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading composer with first account and folder', firstAccount.id, firstFolder.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: firstAccount.id,\n\t\t\t\t\tfolderId: firstFolder.id,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.$route.query.to,\n\t\t\t\t\tcc: this.$route.query.cc,\n\t\t\t\t\tbcc: this.$route.query.bcc,\n\t\t\t\t\tsubject: this.$route.query.subject,\n\t\t\t\t\tbody: this.$route.query.body,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\tonNewMessage() {\n\t\t\t// FIXME: assumes that we're on the 'message' route already\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep #app-content #app-content-wrapper .app-content-details {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n}\n</style>\n","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=1fd66e6e&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=1fd66e6e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fd66e6e\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=style&index=0&id=7015b306&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f5677480\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=style&index=0&id=14b23999&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7cf5a1ef\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=0&id=967d5954&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"65d6dcfb\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppNavigation',[_c('AppNavigationNew',{attrs:{\"text\":_vm.t('mail', 'New message'),\"button-id\":\"mail_new_message\",\"button-class\":\"icon-add\"},on:{\"click\":_vm.onNewMessage}}),_vm._v(\" \"),_c('ul',{attrs:{\"id\":\"accounts-list\"}},[_vm._l((_vm.menu),function(group){return [(group.account)?_c('NavigationAccount',{key:group.account.id,attrs:{\"account\":group.account,\"is-first\":_vm.isFirst(group.account),\"is-last\":_vm.isLast(group.account)}}):_vm._e(),_vm._v(\" \"),_vm._l((group.folders),function(item){return _c('NavigationFolder',{directives:[{name:\"show\",rawName:\"v-show\",value:(!group.account.collapsed || _vm.SHOW_COLLAPSED.indexOf(item.specialRole) !== -1),expression:\"!group.account.collapsed || SHOW_COLLAPSED.indexOf(item.specialRole) !== -1\"}],key:item.key,attrs:{\"account\":group.account,\"folder\":item}})}),_vm._v(\" \"),(!group.account.isUnified && group.account.folders.length > 0)?_c('NavigationAccountExpandCollapse',{key:'collapse-' + group.account.id,attrs:{\"account\":group.account}}):_vm._e(),_vm._v(\" \"),_c('AppNavigationSpacer',{key:'spacer-' + group.account.id})]})],2),_vm._v(\" \"),_c('AppNavigationSettings',{attrs:{\"title\":_vm.t('mail', 'Settings')}},[_c('AppSettingsMenu')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccount.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigationItem\n\t\tv-if=\"visible\"\n\t\t:id=\"id\"\n\t\t:key=\"id\"\n\t\t:icon=\"iconError\"\n\t\t:menu-open.sync=\"menuOpen\"\n\t\t:title=\"account.emailAddress\"\n\t\t:to=\"settingsRoute\"\n\t>\n\t\t<!-- Color dot -->\n\t\t<AppNavigationIconBullet v-if=\"bulletColor\" slot=\"icon\" :color=\"bulletColor\" />\n\n\t\t<!-- Actions -->\n\t\t<template #actions>\n\t\t\t<ActionRouter :to=\"settingsRoute\" icon=\"icon-settings\">\n\t\t\t\t{{ t('mail', 'Edit account') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionInput icon=\"icon-add\" @submit=\"createFolder\">\n\t\t\t\t{{ t('mail', 'Add folder') }}\n\t\t\t</ActionInput>\n\t\t\t<ActionButton v-if=\"!isFirst\" icon=\"icon-triangle-n\" @click=\"changeAccountOrderUp\">\n\t\t\t\t{{ t('mail', 'Move Up') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-if=\"!isLast\" icon=\"icon-triangle-s\" @click=\"changeAccountOrderDown\">\n\t\t\t\t{{ t('mail', 'Move down') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-if=\"!account.provisioned\" icon=\"icon-delete\" @click=\"deleteAccount\">\n\t\t\t\t{{ t('mail', 'Delete account') }}\n\t\t\t</ActionButton>\n\t\t</template>\n\t</AppNavigationItem>\n</template>\n\n<script>\nimport AppNavigationItem from '@nextcloud/vue/dist/Components/AppNavigationItem'\nimport AppNavigationIconBullet from '@nextcloud/vue/dist/Components/AppNavigationIconBullet'\nimport ActionRouter from '@nextcloud/vue/dist/Components/ActionRouter'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionInput from '@nextcloud/vue/dist/Components/ActionInput'\nimport {generateUrl} from '@nextcloud/router'\n\nimport {calculateAccountColor} from '../util/AccountColor'\nimport logger from '../logger'\n\nexport default {\n\tname: 'NavigationAccount',\n\tcomponents: {\n\t\tAppNavigationItem,\n\t\tAppNavigationIconBullet,\n\t\tActionRouter,\n\t\tActionButton,\n\t\tActionInput,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisFirst: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLast: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmenuOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tvisible() {\n\t\t\treturn this.account.isUnified !== true && this.account.visible !== false\n\t\t},\n\t\tsettingsRoute() {\n\t\t\treturn {\n\t\t\t\tname: 'accountSettings',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tid() {\n\t\t\treturn 'account-' + this.account.id\n\t\t},\n\t\tbulletColor() {\n\t\t\treturn this.account.error ? undefined : calculateAccountColor(this.account.emailAddress)\n\t\t},\n\t\ticonError() {\n\t\t\treturn this.account.error ? 'icon-error' : undefined\n\t\t},\n\t},\n\tmethods: {\n\t\tcreateFolder(e) {\n\t\t\tconst name = e.target.elements[1].value\n\t\t\tlogger.info('creating folder ' + name)\n\t\t\tthis.menuOpen = false\n\t\t\tthis.$store\n\t\t\t\t.dispatch('createFolder', {account: this.account, name})\n\t\t\t\t.then(() => logger.info(`folder ${name} created`))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tlogger.error('could not create folder', {error})\n\t\t\t\t\tthrow error\n\t\t\t\t})\n\t\t},\n\t\tdeleteAccount() {\n\t\t\tconst id = this.account.id\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('deleteAccount', this.account)\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.info(`account ${id} deleted, redirecting `)\n\n\t\t\t\t\t// TODO: update store and handle this more efficiently\n\t\t\t\t\tlocation.href = generateUrl('/apps/mail')\n\t\t\t\t})\n\t\t\t\t.catch(error => logger.error('could not delete account', {error}))\n\t\t},\n\t\tchangeAccountOrderUp() {\n\t\t\tthis.$store\n\t\t\t\t.dispatch('moveAccount', {account: this.account, up: true})\n\t\t\t\t.catch(error => logger.error('could not move account up', {error}))\n\t\t},\n\t\tchangeAccountOrderDown() {\n\t\t\tthis.$store\n\t\t\t\t.dispatch('moveAccount', {account: this.account})\n\t\t\t\t.catch(error => logger.error('could not move account down', {error}))\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NavigationAccount.vue?vue&type=template&id=dcf30610&\"\nimport script from \"./NavigationAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationAccount.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('AppNavigationItem',{key:_vm.id,attrs:{\"id\":_vm.id,\"icon\":_vm.iconError,\"menu-open\":_vm.menuOpen,\"title\":_vm.account.emailAddress,\"to\":_vm.settingsRoute},on:{\"update:menuOpen\":function($event){_vm.menuOpen=$event},\"update:menu-open\":function($event){_vm.menuOpen=$event}},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('ActionRouter',{attrs:{\"to\":_vm.settingsRoute,\"icon\":\"icon-settings\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit account'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionInput',{attrs:{\"icon\":\"icon-add\"},on:{\"submit\":_vm.createFolder}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add folder'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(!_vm.isFirst)?_c('ActionButton',{attrs:{\"icon\":\"icon-triangle-n\"},on:{\"click\":_vm.changeAccountOrderUp}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move Up'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.isLast)?_c('ActionButton',{attrs:{\"icon\":\"icon-triangle-s\"},on:{\"click\":_vm.changeAccountOrderDown}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move down'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.account.provisioned)?_c('ActionButton',{attrs:{\"icon\":\"icon-delete\"},on:{\"click\":_vm.deleteAccount}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete account'))+\"\\n\\t\\t\")]):_vm._e()]},proxy:true}],null,false,1751902140)},[(_vm.bulletColor)?_c('AppNavigationIconBullet',{attrs:{\"slot\":\"icon\",\"color\":_vm.bulletColor},slot:\"icon\"}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigationItem :title=\"title\" @click=\"toggleCollapse\" />\n</template>\n\n<script>\nimport AppNavigationItem from '@nextcloud/vue/dist/Components/AppNavigationItem'\n\nexport default {\n\tname: 'NavigationAccount',\n\tcomponents: {\n\t\tAppNavigationItem,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tid() {\n\t\t\treturn 'collapse-' + this.account.id\n\t\t},\n\t\ttitle() {\n\t\t\treturn this.account.collapsed ? t('mail', 'Show all folders') : t('mail', 'Collapse folders')\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggleCollapse() {\n\t\t\tthis.$store.commit('toggleAccountCollapsed', this.account.id)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .app-navigation-entry__title {\n\tcolor: var(--color-text-maxcontrast);\n}\n</style>\n","import { render, staticRenderFns } from \"./NavigationAccountExpandCollapse.vue?vue&type=template&id=7015b306&scoped=true&\"\nimport script from \"./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NavigationAccountExpandCollapse.vue?vue&type=style&index=0&id=7015b306&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7015b306\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppNavigationItem',{attrs:{\"title\":_vm.title},on:{\"click\":_vm.toggleCollapse}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {translate as t} from '@nextcloud/l10n'\n\nconst translateSpecial = folder => {\n\tif (folder.specialUse.includes('all')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'All')\n\t}\n\tif (folder.specialUse.includes('archive')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Archive')\n\t}\n\tif (folder.specialUse.includes('drafts')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Drafts')\n\t}\n\tif (folder.specialUse.includes('flagged')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Favorites')\n\t}\n\tif (folder.specialUse.includes('inbox')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\tif (folder.isUnified === true) {\n\t\t\treturn t('mail', 'All inboxes')\n\t\t} else {\n\t\t\treturn t('mail', 'Inbox')\n\t\t}\n\t}\n\tif (folder.specialUse.includes('junk')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Junk')\n\t}\n\tif (folder.specialUse.includes('sent')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Sent')\n\t}\n\tif (folder.specialUse.includes('trash')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Trash')\n\t}\n\tthrow new Error(`unknown special use ${folder.specialUse}`)\n}\n\nexport const translate = folder => {\n\tif (folder.specialUse.length > 0) {\n\t\ttry {\n\t\t\treturn translateSpecial(folder)\n\t\t} catch (e) {\n\t\t\tconsole.error('could not translate special folder', e)\n\t\t}\n\t}\n\treturn folder.displayName\n}\n","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigationItem\n\t\t:id=\"genId(folder)\"\n\t\t:key=\"genId(folder)\"\n\t\t:allow-collapse=\"true\"\n\t\t:icon=\"icon\"\n\t\t:title=\"title\"\n\t\t:to=\"to\"\n\t\t@update:menuOpen=\"onMenuToggle\"\n\t>\n\t\t<!-- actions -->\n\t\t<template slot=\"actions\">\n\t\t\t<template v-if=\"top\">\n\t\t\t\t<ActionText v-if=\"!account.isUnified\" icon=\"icon-info\" :title=\"folderId\">\n\t\t\t\t\t{{ statsText }}\n\t\t\t\t</ActionText>\n\n\t\t\t\t<!-- TODO: make *mark as read* available for all folders once there is more than one action -->\n\t\t\t\t<ActionButton\n\t\t\t\t\tv-if=\"!account.isUnified\"\n\t\t\t\t\ticon=\"icon-checkmark\"\n\t\t\t\t\t:title=\"t('mail', 'Mark all as read')\"\n\t\t\t\t\t:disabled=\"loadingMarkAsRead\"\n\t\t\t\t\t@click=\"markAsRead\"\n\t\t\t\t>\n\t\t\t\t\t{{ t('mail', 'Mark all messages of this folder as read') }}\n\t\t\t\t</ActionButton>\n\n\t\t\t\t<ActionInput v-if=\"!account.isUnified\" icon=\"icon-add\" @submit=\"createFolder\">\n\t\t\t\t\t{{ t('mail', 'Add subfolder') }}\n\t\t\t\t</ActionInput>\n\t\t\t</template>\n\t\t</template>\n\t\t<AppNavigationCounter v-if=\"folder.unread\" slot=\"counter\">\n\t\t\t{{ folder.unread }}\n\t\t</AppNavigationCounter>\n\n\t\t<!-- subfolders -->\n\t\t<NavigationFolder\n\t\t\tv-for=\"subFolder in subFolders\"\n\t\t\t:key=\"genId(subFolder)\"\n\t\t\t:account=\"account\"\n\t\t\t:folder=\"subFolder\"\n\t\t\t:top=\"false\"\n\t\t/>\n\t</AppNavigationItem>\n</template>\n\n<script>\nimport AppNavigationItem from '@nextcloud/vue/dist/Components/AppNavigationItem'\nimport AppNavigationCounter from '@nextcloud/vue/dist/Components/AppNavigationCounter'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionInput from '@nextcloud/vue/dist/Components/ActionInput'\nimport ActionText from '@nextcloud/vue/dist/Components/ActionText'\n\nimport {getFolderStats} from '../service/FolderService'\nimport logger from '../logger'\nimport {translate as translateMailboxName} from '../l10n/MailboxTranslator'\n\nexport default {\n\tname: 'NavigationFolder',\n\tcomponents: {\n\t\tAppNavigationItem,\n\t\tAppNavigationCounter,\n\t\tActionText,\n\t\tActionButton,\n\t\tActionInput,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\ttop: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfolderStats: undefined,\n\t\t\tloadingMarkAsRead: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn translateMailboxName(this.folder)\n\t\t},\n\t\tfolderId() {\n\t\t\treturn atob(this.folder.id)\n\t\t},\n\t\ticon() {\n\t\t\treturn this.folder.specialRole ? 'icon-' + this.folder.specialRole : 'icon-folder'\n\t\t},\n\t\tto() {\n\t\t\treturn {\n\t\t\t\tname: 'folder',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tsubFolders() {\n\t\t\treturn this.$store.getters.getSubfolders(this.account.id, this.folder.id)\n\t\t},\n\t\tstatsText() {\n\t\t\tif (this.folderStats && 'total' in this.folderStats && 'unread' in this.folderStats) {\n\t\t\t\tif (this.folderStats.unread === 0) {\n\t\t\t\t\treturn n('mail', '{total} message', '{total} messages', {\n\t\t\t\t\t\ttotal: this.folderStats.total,\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\treturn n('mail', '{unread} unread of {total}', '{unread} unread of {total}', {\n\t\t\t\t\t\ttotal: this.folderStats.total,\n\t\t\t\t\t\tunread: this.folderStats.unread,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn t('mail', 'Loading ')\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Generate unique key id for a specific folder\n\t\t */\n\t\tgenId(folder) {\n\t\t\treturn 'account-' + this.account.id + '_' + folder.id\n\t\t},\n\n\t\t/**\n\t\t * On menu toggle, fetch stats\n\t\t * @param {boolean} open menu opened state\n\t\t */\n\t\tonMenuToggle(open) {\n\t\t\tif (open) {\n\t\t\t\tthis.fetchFolderStats()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Fetch folder unread/read stats\n\t\t */\n\t\tasync fetchFolderStats() {\n\t\t\tthis.folderStats = null\n\t\t\ttry {\n\t\t\t\tconst stats = await getFolderStats(this.account.id, this.folder.id)\n\t\t\t\tlogger.debug('loaded folder stats', {stats})\n\t\t\t\tthis.folderStats = stats\n\t\t\t} catch (error) {\n\t\t\t\tthis.folderStats = {error: true}\n\t\t\t\tlogger.error(`could not load folder stats for ${this.folder.id}`, error)\n\t\t\t}\n\t\t},\n\n\t\tcreateFolder(e) {\n\t\t\tconst name = e.target.elements[1].value\n\t\t\tconst withPrefix = atob(this.folder.id) + this.folder.delimiter + name\n\t\t\tlogger.info(`creating folder ${withPrefix} as subfolder of ${this.folder.id}`)\n\t\t\tthis.menuOpen = false\n\t\t\tthis.$store\n\t\t\t\t.dispatch('createFolder', {\n\t\t\t\t\taccount: this.account,\n\t\t\t\t\tname: withPrefix,\n\t\t\t\t})\n\t\t\t\t.then(() => logger.info(`folder ${withPrefix} created`))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tlogger.error(`could not create folder ${withPrefix}`, {error})\n\t\t\t\t\tthrow error\n\t\t\t\t})\n\t\t},\n\t\tmarkAsRead() {\n\t\t\tthis.loadingMarkAsRead = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('markFolderRead', {\n\t\t\t\t\taccount: this.account,\n\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t})\n\t\t\t\t.then(() => logger.info(`folder ${this.folder.id} marked as read`))\n\t\t\t\t.catch(error => logger.error(`could not mark folder ${this.folder.id} as read`, {error}))\n\t\t\t\t.then(() => (this.loadingMarkAsRead = false))\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationFolder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationFolder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavigationFolder.vue?vue&type=template&id=55916702&\"\nimport script from \"./NavigationFolder.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationFolder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppNavigationItem',{key:_vm.genId(_vm.folder),attrs:{\"id\":_vm.genId(_vm.folder),\"allow-collapse\":true,\"icon\":_vm.icon,\"title\":_vm.title,\"to\":_vm.to},on:{\"update:menuOpen\":_vm.onMenuToggle}},[_c('template',{slot:\"actions\"},[(_vm.top)?[(!_vm.account.isUnified)?_c('ActionText',{attrs:{\"icon\":\"icon-info\",\"title\":_vm.folderId}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.statsText)+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.account.isUnified)?_c('ActionButton',{attrs:{\"icon\":\"icon-checkmark\",\"title\":_vm.t('mail', 'Mark all as read'),\"disabled\":_vm.loadingMarkAsRead},on:{\"click\":_vm.markAsRead}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Mark all messages of this folder as read'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.account.isUnified)?_c('ActionInput',{attrs:{\"icon\":\"icon-add\"},on:{\"submit\":_vm.createFolder}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add subfolder'))+\"\\n\\t\\t\\t\")]):_vm._e()]:_vm._e()],2),_vm._v(\" \"),(_vm.folder.unread)?_c('AppNavigationCounter',{attrs:{\"slot\":\"counter\"},slot:\"counter\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.folder.unread)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.subFolders),function(subFolder){return _c('NavigationFolder',{key:_vm.genId(subFolder),attrs:{\"account\":_vm.account,\"folder\":subFolder,\"top\":false}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=script&lang=js&\"","<template>\n\t<div>\n\t\t<router-link to=\"/setup\" class=\"icon-add-white app-settings-button button primary new-button\">\n\t\t\t{{ t('mail', 'Add mail account') }}\n\t\t</router-link>\n\n\t\t<p v-if=\"loadingAvatarSettings\" class=\"app-settings avatar-settings\">\n\t\t\t<span class=\"icon-loading-small\"></span>\n\t\t\t{{ t('mail', 'Use Gravatar and favicon avatars') }}\n\t\t</p>\n\t\t<p v-else class=\"app-settings\">\n\t\t\t<input\n\t\t\t\tid=\"gravatar-enabled\"\n\t\t\t\tclass=\"checkbox\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t:checked=\"useExternalAvatars\"\n\t\t\t\t@change=\"onToggleExternalAvatars\"\n\t\t\t/>\n\t\t\t<label for=\"gravatar-enabled\">{{ t('mail', 'Use Gravatar and favicon avatars') }}</label>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class=\"icon-mail app-settings-button\" @click=\"registerProtocolHandler\">\n\t\t\t\t{{ t('mail', 'Register as application for mail links') }}\n\t\t\t</button>\n\t\t</p>\n\t\t<p class=\"icon-details app-settings-button button\">\n\t\t\t<router-link :to=\"{name: 'keyboardShortcuts'}\">\n\t\t\t\t{{ t('mail', 'Keyboard shortcuts') }}\n\t\t\t</router-link>\n\t\t</p>\n\n\t\t<p class=\"app-settings-hint app-settings-link\">\n\t\t\t<a href=\"https://www.mailvelope.com/\" target=\"_blank\">{{\n\t\t\t\tt('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!')\n\t\t\t}}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport Logger from '../logger'\nimport {generateUrl} from '@nextcloud/router'\n\nexport default {\n\tname: 'AppSettingsMenu',\n\tdata() {\n\t\treturn {\n\t\t\tloadingAvatarSettings: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tuseExternalAvatars() {\n\t\t\treturn this.$store.getters.getPreference('external-avatars', 'true') === 'true'\n\t\t},\n\t},\n\tmethods: {\n\t\tonToggleExternalAvatars(e) {\n\t\t\tthis.loadingAvatarSettings = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('savePreference', {\n\t\t\t\t\tkey: 'external-avatars',\n\t\t\t\t\tvalue: e.target.checked ? 'true' : 'false',\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error('could not save preferences', {error}))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingAvatarSettings = false\n\t\t\t\t})\n\t\t},\n\t\tregisterProtocolHandler: function() {\n\t\t\tif (window.navigator.registerProtocolHandler) {\n\t\t\t\tvar url =\n\t\t\t\t\twindow.location.protocol + '//' + window.location.host + generateUrl('apps/mail/compose?uri=%s')\n\t\t\t\ttry {\n\t\t\t\t\twindow.navigator.registerProtocolHandler('mailto', url, OC.theme.name + ' Mail')\n\t\t\t\t} catch (err) {\n\t\t\t\t\tLogger.error('could not register protocol handler', {err})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\np.avatar-settings span.icon-loading-small {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 5px 0;\n}\np.app-settings {\n\tpadding: 10px 0;\n}\n.app-settings-button {\n\tdisplay: block;\n\tpadding-left: 34px;\n\tbackground-position: 10px center;\n}\n.app-settings-link {\n\ttext-decoration: underline;\n}\n</style>\n","import { render, staticRenderFns } from \"./AppSettingsMenu.vue?vue&type=template&id=14b23999&scoped=true&\"\nimport script from \"./AppSettingsMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppSettingsMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppSettingsMenu.vue?vue&type=style&index=0&id=14b23999&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14b23999\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('router-link',{staticClass:\"icon-add-white app-settings-button button primary new-button\",attrs:{\"to\":\"/setup\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Add mail account'))+\"\\n\\t\")]),_vm._v(\" \"),(_vm.loadingAvatarSettings)?_c('p',{staticClass:\"app-settings avatar-settings\"},[_c('span',{staticClass:\"icon-loading-small\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Use Gravatar and favicon avatars'))+\"\\n\\t\")]):_c('p',{staticClass:\"app-settings\"},[_c('input',{staticClass:\"checkbox\",attrs:{\"id\":\"gravatar-enabled\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.useExternalAvatars},on:{\"change\":_vm.onToggleExternalAvatars}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"gravatar-enabled\"}},[_vm._v(_vm._s(_vm.t('mail', 'Use Gravatar and favicon avatars')))])]),_vm._v(\" \"),_c('p',[_c('button',{staticClass:\"icon-mail app-settings-button\",on:{\"click\":_vm.registerProtocolHandler}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Register as application for mail links'))+\"\\n\\t\\t\")])]),_vm._v(\" \"),_c('p',{staticClass:\"icon-details app-settings-button button\"},[_c('router-link',{attrs:{\"to\":{name: 'keyboardShortcuts'}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Keyboard shortcuts'))+\"\\n\\t\\t\")])],1),_vm._v(\" \"),_c('p',{staticClass:\"app-settings-hint app-settings-link\"},[_c('a',{attrs:{\"href\":\"https://www.mailvelope.com/\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.t('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!')))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigation>\n\t\t<AppNavigationNew\n\t\t\t:text=\"t('mail', 'New message')\"\n\t\t\tbutton-id=\"mail_new_message\"\n\t\t\tbutton-class=\"icon-add\"\n\t\t\t@click=\"onNewMessage\"\n\t\t/>\n\t\t<ul id=\"accounts-list\">\n\t\t\t<template v-for=\"group in menu\">\n\t\t\t\t<NavigationAccount\n\t\t\t\t\tv-if=\"group.account\"\n\t\t\t\t\t:key=\"group.account.id\"\n\t\t\t\t\t:account=\"group.account\"\n\t\t\t\t\t:is-first=\"isFirst(group.account)\"\n\t\t\t\t\t:is-last=\"isLast(group.account)\"\n\t\t\t\t/>\n\t\t\t\t<NavigationFolder\n\t\t\t\t\tv-for=\"item in group.folders\"\n\t\t\t\t\tv-show=\"!group.account.collapsed || SHOW_COLLAPSED.indexOf(item.specialRole) !== -1\"\n\t\t\t\t\t:key=\"item.key\"\n\t\t\t\t\t:account=\"group.account\"\n\t\t\t\t\t:folder=\"item\"\n\t\t\t\t/>\n\t\t\t\t<NavigationAccountExpandCollapse\n\t\t\t\t\tv-if=\"!group.account.isUnified && group.account.folders.length > 0\"\n\t\t\t\t\t:key=\"'collapse-' + group.account.id\"\n\t\t\t\t\t:account=\"group.account\"\n\t\t\t\t/>\n\t\t\t\t<AppNavigationSpacer :key=\"'spacer-' + group.account.id\" />\n\t\t\t</template>\n\t\t</ul>\n\t\t<AppNavigationSettings :title=\"t('mail', 'Settings')\">\n\t\t\t<AppSettingsMenu />\n\t\t</AppNavigationSettings>\n\t</AppNavigation>\n</template>\n\n<script>\nimport AppNavigation from '@nextcloud/vue/dist/Components/AppNavigation'\nimport AppNavigationNew from '@nextcloud/vue/dist/Components/AppNavigationNew'\nimport AppNavigationSettings from '@nextcloud/vue/dist/Components/AppNavigationSettings'\nimport AppNavigationSpacer from '@nextcloud/vue/dist/Components/AppNavigationSpacer'\n\nimport NavigationAccount from './NavigationAccount'\nimport NavigationAccountExpandCollapse from './NavigationAccountExpandCollapse'\nimport NavigationFolder from './NavigationFolder'\n\nconst SHOW_COLLAPSED = Object.seal(['inbox', 'flagged', 'drafts', 'sent'])\n\nimport AppSettingsMenu from '../components/AppSettingsMenu'\n\nexport default {\n\tname: 'Navigation',\n\tcomponents: {\n\t\tAppNavigation,\n\t\tAppNavigationNew,\n\t\tAppNavigationSettings,\n\t\tAppNavigationSpacer,\n\t\tAppSettingsMenu,\n\t\tNavigationAccount,\n\t\tNavigationAccountExpandCollapse,\n\t\tNavigationFolder,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tSHOW_COLLAPSED,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmenu() {\n\t\t\treturn this.$store.getters.accounts.map(account => {\n\t\t\t\tconst folders = this.$store.getters\n\t\t\t\t\t.getFolders(account.id)\n\t\t\t\t\t.filter(folder => !account.collapsed || SHOW_COLLAPSED.indexOf(folder.specialRole) !== -1)\n\t\t\t\t//.map(folderToEntry)\n\n\t\t\t\treturn {\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taccount: account,\n\t\t\t\t\tfolders,\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonNewMessage() {\n\t\t\t// FIXME: assumes that we're on the 'message' route already\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tisFirst(account) {\n\t\t\tconst accounts = this.$store.getters.accounts\n\t\t\treturn account === accounts[1]\n\t\t},\n\t\tisLast(account) {\n\t\t\tconst accounts = this.$store.getters.accounts\n\t\t\treturn account === accounts[accounts.length - 1]\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Navigation.vue?vue&type=template&id=1c849ed8&scoped=true&\"\nimport script from \"./Navigation.vue?vue&type=script&lang=js&\"\nexport * from \"./Navigation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c849ed8\",\n  null\n  \n)\n\nexport default component.exports","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport md5 from 'md5'\nimport conv from 'color-convert'\n\nexport const calculateAccountColor = name => {\n\tconst hashed = md5(name)\n\tconst hsl = conv.hex.hsl(hashed)\n\tconst fixedHsl = [Math.round(hsl[0] / 40) * 40, hsl[1], hsl[2]]\n\n\treturn '#' + conv.hsl.hex(fixedHsl)\n}\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=style&index=0&id=7015b306&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=style&index=0&id=7015b306&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-7015b306] .app-navigation-entry__title{color:var(--color-text-maxcontrast)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=style&index=0&id=14b23999&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=style&index=0&id=14b23999&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\np.avatar-settings span.icon-loading-small[data-v-14b23999] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 5px 0;\\n}\\np.app-settings[data-v-14b23999] {\\n\\tpadding: 10px 0;\\n}\\n.app-settings-button[data-v-14b23999] {\\n\\tdisplay: block;\\n\\tpadding-left: 34px;\\n\\tbackground-position: 10px center;\\n}\\n.app-settings-link[data-v-14b23999] {\\n\\ttext-decoration: underline;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var map = {\n\t\"./af\": 688,\n\t\"./af.js\": 688,\n\t\"./ar\": 689,\n\t\"./ar.js\": 689,\n\t\"./ast\": 690,\n\t\"./ast.js\": 690,\n\t\"./az\": 691,\n\t\"./az.js\": 691,\n\t\"./bg\": 692,\n\t\"./bg.js\": 692,\n\t\"./ca\": 693,\n\t\"./ca.js\": 693,\n\t\"./cs\": 694,\n\t\"./cs.js\": 694,\n\t\"./da\": 695,\n\t\"./da.js\": 695,\n\t\"./de\": 697,\n\t\"./de-ch\": 696,\n\t\"./de-ch.js\": 696,\n\t\"./de.js\": 697,\n\t\"./el\": 698,\n\t\"./el.js\": 698,\n\t\"./en-au\": 699,\n\t\"./en-au.js\": 699,\n\t\"./en-gb\": 700,\n\t\"./en-gb.js\": 700,\n\t\"./eo\": 701,\n\t\"./eo.js\": 701,\n\t\"./es\": 702,\n\t\"./es.js\": 702,\n\t\"./et\": 703,\n\t\"./et.js\": 703,\n\t\"./eu\": 704,\n\t\"./eu.js\": 704,\n\t\"./fa\": 705,\n\t\"./fa.js\": 705,\n\t\"./fi\": 706,\n\t\"./fi.js\": 706,\n\t\"./fr\": 707,\n\t\"./fr.js\": 707,\n\t\"./gl\": 708,\n\t\"./gl.js\": 708,\n\t\"./gu\": 709,\n\t\"./gu.js\": 709,\n\t\"./he\": 710,\n\t\"./he.js\": 710,\n\t\"./hr\": 711,\n\t\"./hr.js\": 711,\n\t\"./hu\": 712,\n\t\"./hu.js\": 712,\n\t\"./id\": 713,\n\t\"./id.js\": 713,\n\t\"./it\": 714,\n\t\"./it.js\": 714,\n\t\"./ja\": 715,\n\t\"./ja.js\": 715,\n\t\"./km\": 716,\n\t\"./km.js\": 716,\n\t\"./kn\": 717,\n\t\"./kn.js\": 717,\n\t\"./ko\": 718,\n\t\"./ko.js\": 718,\n\t\"./ku\": 719,\n\t\"./ku.js\": 719,\n\t\"./lt\": 720,\n\t\"./lt.js\": 720,\n\t\"./lv\": 721,\n\t\"./lv.js\": 721,\n\t\"./ms\": 722,\n\t\"./ms.js\": 722,\n\t\"./nb\": 723,\n\t\"./nb.js\": 723,\n\t\"./ne\": 724,\n\t\"./ne.js\": 724,\n\t\"./nl\": 725,\n\t\"./nl.js\": 725,\n\t\"./no\": 726,\n\t\"./no.js\": 726,\n\t\"./oc\": 727,\n\t\"./oc.js\": 727,\n\t\"./pl\": 728,\n\t\"./pl.js\": 728,\n\t\"./pt\": 730,\n\t\"./pt-br\": 729,\n\t\"./pt-br.js\": 729,\n\t\"./pt.js\": 730,\n\t\"./ro\": 731,\n\t\"./ro.js\": 731,\n\t\"./ru\": 732,\n\t\"./ru.js\": 732,\n\t\"./si\": 733,\n\t\"./si.js\": 733,\n\t\"./sk\": 734,\n\t\"./sk.js\": 734,\n\t\"./sl\": 735,\n\t\"./sl.js\": 735,\n\t\"./sq\": 736,\n\t\"./sq.js\": 736,\n\t\"./sr\": 738,\n\t\"./sr-latn\": 737,\n\t\"./sr-latn.js\": 737,\n\t\"./sr.js\": 738,\n\t\"./sv\": 739,\n\t\"./sv.js\": 739,\n\t\"./tr\": 740,\n\t\"./tr.js\": 740,\n\t\"./tt\": 741,\n\t\"./tt.js\": 741,\n\t\"./ug\": 742,\n\t\"./ug.js\": 742,\n\t\"./uk\": 743,\n\t\"./uk.js\": 743,\n\t\"./vi\": 744,\n\t\"./vi.js\": 744,\n\t\"./zh\": 746,\n\t\"./zh-cn\": 745,\n\t\"./zh-cn.js\": 745,\n\t\"./zh.js\": 746\n};\n\n\nfunction webpackAsyncContext(req) {\n\treturn webpackAsyncContextResolve(req).then(function(id) {\n\t\treturn __webpack_require__.t(id, 7);;\n\t});\n}\nfunction webpackAsyncContextResolve(req) {\n\treturn __webpack_require__.e(/* lazy-once context */ 9).then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\t\treturn map[req];\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.resolve = webpackAsyncContextResolve;\nwebpackAsyncContext.id = 783;\nmodule.exports = webpackAsyncContext;","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=0&id=967d5954&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=0&id=967d5954&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-967d5954] p{cursor:text}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/**\n * Mail\n *\n * This file is licensed under the Affero General Public License version 3 or\n * later. See the COPYING file.\n *\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n * @copyright Christoph Wurst 2016\n */\n\nimport {fromString} from 'html-to-text'\n\nexport const htmlToText = html => {\n\tconst withBlockBreaks = html.replace(/<\\/div>/gi, '</div><br>')\n\n\tconst text = fromString(withBlockBreaks, {\n\t\tnoLinkBrackets: true,\n\t\tignoreHref: true,\n\t\tignoreImage: true,\n\t\twordwrap: false,\n\t\tformat: {\n\t\t\tblockquote: function(element, fn, options) {\n\t\t\t\treturn fn(element.children, options)\n\t\t\t\t\t.replace(/\\n\\n\\n/g, '\\n\\n') // remove triple line breaks\n\t\t\t\t\t.replace(/^/gm, '> ') // add > quotation to each line\n\t\t\t},\n\t\t},\n\t})\n\n\treturn text\n\t\t.replace(/\\n\\n\\n/g, '\\n\\n') // remove triple line breaks\n\t\t.replace(/^[\\n\\r]+/g, '') // trim line breaks at beginning and end\n\t\t.replace(/ $/gm, '') // trim white space at end of each line\n}\n\nexport const textToSimpleHtml = text => {\n\treturn text.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1<br>$2')\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=ec03f544&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7ca22fac\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=1159209c&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"449bee28\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=1f409bfa&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"096e8e1e\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=b923b46c&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f08ec318\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=5dfcd8b6&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1748cf82\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=5978d1e8&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6c8d2aa2\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=5473b814&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4d1b97c0\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=375b1446&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b459e69c\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=7f3ec3f9&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"19494b32\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0d2c63ea\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"20b07b9b\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=84fc7730&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f11f33a8\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=5d616abc&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"39dc4f9e\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=1&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"25fe426c\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=ef526768&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"75b1afa3\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=1fd66e6e&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3aca70bb\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.ready)?_c('ckeditor',{attrs:{\"config\":_vm.config,\"editor\":_vm.editor},on:{\"input\":_vm.onInput,\"ready\":_vm.onEditorReady},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<ckeditor\n\t\tv-if=\"ready\"\n\t\tv-model=\"text\"\n\t\t:config=\"config\"\n\t\t:editor=\"editor\"\n\t\t@input=\"onInput\"\n\t\t@ready=\"onEditorReady\"\n\t></ckeditor>\n</template>\n\n<script>\nimport CKEditor from '@ckeditor/ckeditor5-vue'\nimport Editor from '@ckeditor/ckeditor5-editor-balloon/src/ballooneditor'\nimport EssentialsPlugin from '@ckeditor/ckeditor5-essentials/src/essentials'\nimport BlockQuotePlugin from '@ckeditor/ckeditor5-block-quote/src/blockquote'\nimport BoldPlugin from '@ckeditor/ckeditor5-basic-styles/src/bold'\nimport ItalicPlugin from '@ckeditor/ckeditor5-basic-styles/src/italic'\nimport LinkPlugin from '@ckeditor/ckeditor5-link/src/link'\nimport ParagraphPlugin from '@ckeditor/ckeditor5-paragraph/src/paragraph'\n\nimport {getLanguage} from '@nextcloud/l10n'\n\nimport logger from '../logger'\n\nexport default {\n\tname: 'TextEditor',\n\tcomponents: {\n\t\tckeditor: CKEditor.component,\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thtml: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tfocus: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttext: '',\n\t\t\tready: false,\n\t\t\teditor: Editor,\n\t\t\tconfig: {\n\t\t\t\tplaceholder: this.placeholder,\n\t\t\t\tplugins: this.html\n\t\t\t\t\t? [EssentialsPlugin, ParagraphPlugin, BoldPlugin, ItalicPlugin, LinkPlugin, BlockQuotePlugin]\n\t\t\t\t\t: [EssentialsPlugin, ParagraphPlugin],\n\t\t\t\ttoolbar: {\n\t\t\t\t\titems: this.html ? ['bold', 'italic', 'blockquote', 'link', 'undo', 'redo'] : ['undo', 'redo'],\n\t\t\t\t},\n\t\t\t\tlanguage: 'en',\n\t\t\t},\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tthis.loadEditorTranslations(getLanguage())\n\t},\n\tmethods: {\n\t\tloadEditorTranslations(language) {\n\t\t\tif (language === 'en') {\n\t\t\t\t// The default, nothing to fetch\n\t\t\t\treturn this.showEditor('en')\n\t\t\t}\n\n\t\t\timport(\n\t\t\t\t/* webpackMode: \"lazy-once\" */\n\t\t\t\t/* webpackPrefetch: true */\n\t\t\t\t/* webpackPreload: true */\n\t\t\t\t`@ckeditor/ckeditor5-build-balloon/build/translations/${language}`\n\t\t\t)\n\t\t\t\t.then(() => this.showEditor(language))\n\t\t\t\t.catch(() => this.showEditor('en'))\n\t\t},\n\t\tshowEditor(language) {\n\t\t\tif (this.html) {\n\t\t\t\tthis.config.language = language\n\t\t\t} else {\n\t\t\t\tthis.config.language = language\n\t\t\t}\n\n\t\t\tthis.ready = true\n\t\t},\n\t\tonEditorReady(editor) {\n\t\t\tconst schema = editor.model.schema\n\n\t\t\tschema.on(\n\t\t\t\t'checkChild',\n\t\t\t\t(evt, args) => {\n\t\t\t\t\tconst context = args[0]\n\n\t\t\t\t\tif (context.endsWith('blockQuote')) {\n\t\t\t\t\t\t// Prevent next listeners from being called.\n\t\t\t\t\t\tevt.stop()\n\t\t\t\t\t\t// Set the checkChild()'s return value.\n\t\t\t\t\t\tevt.return = true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpriority: 'highest',\n\t\t\t\t}\n\t\t\t)\n\t\t\tif (this.focus) {\n\t\t\t\tlogger.debug('focusing TextEditor')\n\t\t\t\teditor.editing.view.focus()\n\t\t\t}\n\n\t\t\t// Set value as late as possible, so the custom schema listener is used\n\t\t\t// for the initial editor model\n\t\t\tthis.text = this.value\n\n\t\t\tlogger.debug(`setting TextEditor contents to <${this.text}>`)\n\t\t},\n\t\tonInput() {\n\t\t\tlogger.debug(`TextEditor input changed to <${this.text}>`)\n\t\t\tthis.$emit('input', this.text)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep p {\n\tcursor: text;\n}\n</style>\n","import { render, staticRenderFns } from \"./TextEditor.vue?vue&type=template&id=967d5954&scoped=true&\"\nimport script from \"./TextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TextEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextEditor.vue?vue&type=style&index=0&id=967d5954&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"967d5954\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}